"use strict";

var io = require('@pm2/io'); // Straight Metric


var user_count = 10;
var users = io.metric({
  name: 'CM: Realtime user',
  value: function value() {
    return user_count;
  }
}); // or users.set(user_count)
// Counter (.inc() .dec())

var currentReq = io.counter({
  name: 'CM: Current Processing',
  type: 'counter'
});
setInterval(function () {
  currentReq.inc();
}, 1000); // Meter

var reqsec = io.meter({
  name: 'CM: req/sec'
});
setInterval(function () {
  reqsec.mark();
}, 100); // Histogram

var latency = io.histogram({
  name: 'CM: latency'
});
var latencyValue = 0;
setInterval(function () {
  latencyValue = Math.round(Math.random() * 100);
  latency.update(latencyValue);
}, 100); ////////////////////
// Custom Actions //
////////////////////

io.action('add user', function (done) {
  user_count++;
  done({
    success: true
  });
});
io.action('remove user', function (done) {
  user_count++;
  done({
    success: true
  });
});
io.action('with params', function (arg, done) {
  console.log(arg);
  done({
    success: arg
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy90ZW1wbGF0ZXMvc2FtcGxlLWFwcHMvcG0yLXBsdXMtbWV0cmljcy1hY3Rpb25zL2N1c3RvbS1tZXRyaWNzLmpzIl0sIm5hbWVzIjpbImlvIiwicmVxdWlyZSIsInVzZXJfY291bnQiLCJ1c2VycyIsIm1ldHJpYyIsIm5hbWUiLCJ2YWx1ZSIsImN1cnJlbnRSZXEiLCJjb3VudGVyIiwidHlwZSIsInNldEludGVydmFsIiwiaW5jIiwicmVxc2VjIiwibWV0ZXIiLCJtYXJrIiwibGF0ZW5jeSIsImhpc3RvZ3JhbSIsImxhdGVuY3lWYWx1ZSIsIk1hdGgiLCJyb3VuZCIsInJhbmRvbSIsInVwZGF0ZSIsImFjdGlvbiIsImRvbmUiLCJzdWNjZXNzIiwiYXJnIiwiY29uc29sZSIsImxvZyJdLCJtYXBwaW5ncyI6Ijs7QUFDQSxJQUFNQSxFQUFFLEdBQUdDLE9BQU8sQ0FBQyxTQUFELENBQWxCLEMsQ0FFQTs7O0FBQ0EsSUFBSUMsVUFBVSxHQUFHLEVBQWpCO0FBRUEsSUFBTUMsS0FBSyxHQUFHSCxFQUFFLENBQUNJLE1BQUgsQ0FBVTtBQUN0QkMsRUFBQUEsSUFBSSxFQUFFLG1CQURnQjtBQUV0QkMsRUFBQUEsS0FBSyxFQUFFLGlCQUFNO0FBQ1gsV0FBT0osVUFBUDtBQUNEO0FBSnFCLENBQVYsQ0FBZCxDLENBT0E7QUFFQTs7QUFDQSxJQUFNSyxVQUFVLEdBQUdQLEVBQUUsQ0FBQ1EsT0FBSCxDQUFXO0FBQzVCSCxFQUFBQSxJQUFJLEVBQUUsd0JBRHNCO0FBRTVCSSxFQUFBQSxJQUFJLEVBQUU7QUFGc0IsQ0FBWCxDQUFuQjtBQUtBQyxXQUFXLENBQUMsWUFBTTtBQUNoQkgsRUFBQUEsVUFBVSxDQUFDSSxHQUFYO0FBQ0QsQ0FGVSxFQUVSLElBRlEsQ0FBWCxDLENBSUE7O0FBQ0EsSUFBTUMsTUFBTSxHQUFHWixFQUFFLENBQUNhLEtBQUgsQ0FBUztBQUN0QlIsRUFBQUEsSUFBSSxFQUFFO0FBRGdCLENBQVQsQ0FBZjtBQUlBSyxXQUFXLENBQUMsWUFBTTtBQUNoQkUsRUFBQUEsTUFBTSxDQUFDRSxJQUFQO0FBQ0QsQ0FGVSxFQUVSLEdBRlEsQ0FBWCxDLENBS0E7O0FBQ0EsSUFBTUMsT0FBTyxHQUFHZixFQUFFLENBQUNnQixTQUFILENBQWE7QUFDM0JYLEVBQUFBLElBQUksRUFBRTtBQURxQixDQUFiLENBQWhCO0FBSUEsSUFBSVksWUFBWSxHQUFHLENBQW5CO0FBRUFQLFdBQVcsQ0FBQyxZQUFNO0FBQ2hCTyxFQUFBQSxZQUFZLEdBQUdDLElBQUksQ0FBQ0MsS0FBTCxDQUFXRCxJQUFJLENBQUNFLE1BQUwsS0FBZ0IsR0FBM0IsQ0FBZjtBQUNBTCxFQUFBQSxPQUFPLENBQUNNLE1BQVIsQ0FBZUosWUFBZjtBQUNELENBSFUsRUFHUixHQUhRLENBQVgsQyxDQU1BO0FBQ0E7QUFDQTs7QUFFQWpCLEVBQUUsQ0FBQ3NCLE1BQUgsQ0FBVSxVQUFWLEVBQXNCLFVBQUNDLElBQUQsRUFBVTtBQUM5QnJCLEVBQUFBLFVBQVU7QUFDVnFCLEVBQUFBLElBQUksQ0FBQztBQUFDQyxJQUFBQSxPQUFPLEVBQUM7QUFBVCxHQUFELENBQUo7QUFDRCxDQUhEO0FBS0F4QixFQUFFLENBQUNzQixNQUFILENBQVUsYUFBVixFQUF5QixVQUFDQyxJQUFELEVBQVU7QUFDakNyQixFQUFBQSxVQUFVO0FBQ1ZxQixFQUFBQSxJQUFJLENBQUM7QUFBQ0MsSUFBQUEsT0FBTyxFQUFDO0FBQVQsR0FBRCxDQUFKO0FBQ0QsQ0FIRDtBQUtBeEIsRUFBRSxDQUFDc0IsTUFBSCxDQUFVLGFBQVYsRUFBeUIsVUFBQ0csR0FBRCxFQUFNRixJQUFOLEVBQWU7QUFDdENHLEVBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZRixHQUFaO0FBQ0FGLEVBQUFBLElBQUksQ0FBQztBQUFDQyxJQUFBQSxPQUFPLEVBQUNDO0FBQVQsR0FBRCxDQUFKO0FBQ0QsQ0FIRCIsInNvdXJjZXNDb250ZW50IjpbIlxuY29uc3QgaW8gPSByZXF1aXJlKCdAcG0yL2lvJylcblxuLy8gU3RyYWlnaHQgTWV0cmljXG52YXIgdXNlcl9jb3VudCA9IDEwXG5cbmNvbnN0IHVzZXJzID0gaW8ubWV0cmljKHtcbiAgbmFtZTogJ0NNOiBSZWFsdGltZSB1c2VyJyxcbiAgdmFsdWU6ICgpID0+IHtcbiAgICByZXR1cm4gdXNlcl9jb3VudFxuICB9XG59KVxuXG4vLyBvciB1c2Vycy5zZXQodXNlcl9jb3VudClcblxuLy8gQ291bnRlciAoLmluYygpIC5kZWMoKSlcbmNvbnN0IGN1cnJlbnRSZXEgPSBpby5jb3VudGVyKHtcbiAgbmFtZTogJ0NNOiBDdXJyZW50IFByb2Nlc3NpbmcnLFxuICB0eXBlOiAnY291bnRlcidcbn0pXG5cbnNldEludGVydmFsKCgpID0+IHtcbiAgY3VycmVudFJlcS5pbmMoKVxufSwgMTAwMClcblxuLy8gTWV0ZXJcbmNvbnN0IHJlcXNlYyA9IGlvLm1ldGVyKHtcbiAgbmFtZTogJ0NNOiByZXEvc2VjJ1xufSlcblxuc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICByZXFzZWMubWFyaygpXG59LCAxMDApXG5cblxuLy8gSGlzdG9ncmFtXG5jb25zdCBsYXRlbmN5ID0gaW8uaGlzdG9ncmFtKHtcbiAgbmFtZTogJ0NNOiBsYXRlbmN5J1xufSk7XG5cbnZhciBsYXRlbmN5VmFsdWUgPSAwO1xuXG5zZXRJbnRlcnZhbCgoKSA9PiB7XG4gIGxhdGVuY3lWYWx1ZSA9IE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSAqIDEwMCk7XG4gIGxhdGVuY3kudXBkYXRlKGxhdGVuY3lWYWx1ZSk7XG59LCAxMDApXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIEN1c3RvbSBBY3Rpb25zIC8vXG4vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG5pby5hY3Rpb24oJ2FkZCB1c2VyJywgKGRvbmUpID0+IHtcbiAgdXNlcl9jb3VudCsrXG4gIGRvbmUoe3N1Y2Nlc3M6dHJ1ZX0pXG59KVxuXG5pby5hY3Rpb24oJ3JlbW92ZSB1c2VyJywgKGRvbmUpID0+IHtcbiAgdXNlcl9jb3VudCsrXG4gIGRvbmUoe3N1Y2Nlc3M6dHJ1ZX0pXG59KVxuXG5pby5hY3Rpb24oJ3dpdGggcGFyYW1zJywgKGFyZywgZG9uZSkgPT4ge1xuICBjb25zb2xlLmxvZyhhcmcpXG4gIGRvbmUoe3N1Y2Nlc3M6YXJnfSlcbn0pXG4iXX0=