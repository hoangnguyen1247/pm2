"use strict";

var _constants = _interopRequireDefault(require("../../../constants"));

var _Common = _interopRequireDefault(require("../../Common"));

var _Configuration = _interopRequireDefault(require("../../Configuration"));

var _helpers = _interopRequireDefault(require("./helpers"));

var _chalk = _interopRequireDefault(require("chalk"));

var _cliTableau = _interopRequireDefault(require("cli-tableau"));

var _passwd = _interopRequireDefault(require("../../tools/passwd"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

var List = {};
var CONDENSED_MODE = (process.stdout.columns || 300) < 120;
/**
 * Check if dump file contains same apps that the one managed by PM2
 */

function checkIfProcessAreDumped(list) {
  try {
    var dump_raw = require('fs').readFileSync(_constants["default"].DUMP_FILE_PATH);

    var dump = JSON.parse(dump_raw);
    var apps_dumped = dump.map(function (proc) {
      return proc.name;
    });
    var apps_running = list.filter(function (proc) {
      return proc.pm2_env.pmx_module != true;
    }).map(function (proc) {
      return proc.name;
    });
    var diff = apps_dumped.filter(function (a) {
      return !apps_running.includes(a);
    });

    if (diff.length > 0) {
      _Common["default"].printOut("Current process list running is not in sync with saved list. ".concat(_chalk["default"].italic(diff.join(' ')), " differs. Type 'pm2 save' to synchronize."));
    } else if (apps_dumped.length != apps_running.length) {
      _Common["default"].printOut("Current process list running is not in sync with saved list. Type 'pm2 save' to synchronize'");
    }
  } catch (e) {}
}

var proc_id = 0;
/**
 * List Applications and Modules managed by PM2
 */

function listModulesAndAppsManaged(list) {
  var name_col_size = 11;
  if (list && list.length > 0) name_col_size = list.reduce(function (p, c) {
    return p.name.length > c.name.length ? p : c;
  }).name.length + 5;
  var app_head = {
    id: 5,
    name: name_col_size,
    namespace: 13,
    version: 9,
    mode: 9,
    pid: 10,
    uptime: 8,
    '↺': 6,
    status: 11,
    cpu: 10,
    mem: 10,
    user: 10,
    watching: 10
  };
  var mod_head = {
    id: 4,
    module: 39,
    version: 20,
    pid: 7,
    status: 10,
    '↺': 6,
    cpu: 10,
    mem: 10,
    user: 10
  };

  if (CONDENSED_MODE) {
    app_head = {
      id: 4,
      name: 20,
      mode: 10,
      '↺': 6,
      status: 11,
      cpu: 10,
      memory: 10
    };
    mod_head = {
      id: 4,
      name: 20,
      status: 10,
      cpu: 10,
      mem: 10
    };
  }

  var app_table = new _cliTableau["default"]({
    head: Object.keys(app_head),
    colWidths: Object.keys(app_head).map(function (k) {
      return app_head[k];
    }),
    colAligns: ['left'],
    style: {
      'padding-left': 1,
      head: ['cyan', 'bold'],
      compact: true
    }
  });
  var module_table = new _cliTableau["default"]({
    head: Object.keys(mod_head),
    colWidths: Object.keys(mod_head).map(function (k) {
      return mod_head[k];
    }),
    colAligns: ['left'],
    style: {
      'padding-left': 1,
      head: ['cyan', 'bold'],
      compact: true
    }
  });
  var sortField = 'name',
      sortOrder = 'asc',
      sort,
      fields = {
    name: 'pm2_env.name',
    namespace: 'pm2_env.namespace',
    pid: 'pid',
    id: 'pm_id',
    cpu: 'monit.cpu',
    memory: 'monit.memory',
    uptime: 'pm2_env.pm_uptime',
    status: 'pm2_env.status'
  };
  list.sort(function (a, b) {
    var fieldA = _helpers["default"].getNestedProperty(fields[sortField], a);

    var fieldB = _helpers["default"].getNestedProperty(fields[sortField], b);

    if (sortOrder === 'desc') {
      if (fieldA > fieldB) return -1;
      if (fieldA < fieldB) return 1;
    } else {
      if (fieldA < fieldB) return -1;
      if (fieldA > fieldB) return 1;
    }

    return 0;
  });
  list.forEach(function (l) {
    var obj = {};

    if (l.pm2_env.pm_id > proc_id) {
      proc_id = l.pm2_env.pm_id;
    }

    var mode = l.pm2_env.exec_mode;
    var status = l.pm2_env.status;
    var key = l.pm2_env.pm_id;
    key = _chalk["default"].bold.cyan(key);

    if (l.pm2_env.axm_options) {
      var is_tracing_enabled = false;
      if (l.pm2_env.axm_options.tracing && typeof l.pm2_env.axm_options.tracing == 'boolean' && l.pm2_env.axm_options.tracing == true) is_tracing_enabled = true;
      if (l.pm2_env.axm_options.tracing && l.pm2_env.axm_options.tracing.enabled && typeof l.pm2_env.axm_options.tracing.enabled == 'boolean' && l.pm2_env.axm_options.tracing.enabled == true) is_tracing_enabled = true;
      if (is_tracing_enabled == true) l.pm2_env.name = _chalk["default"].green('☵') + ' ' + l.pm2_env.name;
      if (l.pm2_env._km_monitored) l.pm2_env.name = _chalk["default"].bold.green('◉') + ' ' + l.pm2_env.name;
    }

    if (l.pm2_env.pmx_module == true) {
      // pm2 ls for Modules
      obj[key] = [];
      obj[key].push(l.name); // Module version + PID

      if (!CONDENSED_MODE) {
        var pid = l.pm2_env.axm_options.pid ? l.pm2_env.axm_options.pid : l.pid;
        obj[key].push(l.pm2_env.version || 'N/A', pid);
      } // Status


      obj[key].push(_helpers["default"].colorStatus(status)); // Restart

      if (!CONDENSED_MODE) obj[key].push(l.pm2_env.restart_time ? l.pm2_env.restart_time : 0); // CPU + Memory

      obj[key].push(l.monit ? l.monit.cpu + '%' : 'N/A', l.monit ? _helpers["default"].bytesToSize(l.monit.memory, 1) : 'N/A'); // User

      if (!CONDENSED_MODE) {
        if (l.pm2_env.uid && typeof l.pm2_env.uid == 'number') {
          // Resolve user id to username
          var users = _passwd["default"].getUsers();

          Object.keys(users).forEach(function (username) {
            var user = users[username];

            if (user.userId == l.pm2_env.uid) {
              l.pm2_env.uid = user.username;
            }
          });
        }

        obj[key].push(_chalk["default"].bold(l.pm2_env.uid || l.pm2_env.username));
      }

      _helpers["default"].safe_push(module_table, obj);
    } else {
      // pm2 ls for Applications
      obj[key] = []; // PM2 ID

      obj[key].push(l.pm2_env.name); // Namespace

      if (!CONDENSED_MODE) obj[key].push(l.pm2_env.namespace); // Version

      if (!CONDENSED_MODE) obj[key].push(l.pm2_env.version); // Exec mode

      obj[key].push(mode == 'fork_mode' ? _chalk["default"].inverse.bold('fork') : _chalk["default"].blue.bold('cluster')); // PID

      if (!CONDENSED_MODE) obj[key].push(l.pid); // Uptime

      if (!CONDENSED_MODE) obj[key].push(l.pm2_env.pm_uptime && status == 'online' ? _helpers["default"].timeSince(l.pm2_env.pm_uptime) : 0); // Restart

      obj[key].push(l.pm2_env.restart_time ? l.pm2_env.restart_time : 0); // Status

      obj[key].push(_helpers["default"].colorStatus(status)); // CPU

      obj[key].push(l.monit ? l.monit.cpu + '%' : 'N/A'); // Memory

      obj[key].push(l.monit ? _helpers["default"].bytesToSize(l.monit.memory, 1) : 'N/A'); // User

      if (!CONDENSED_MODE) {
        if (l.pm2_env.uid && typeof l.pm2_env.uid == 'number') {
          // Resolve user id to username
          var _users = _passwd["default"].getUsers();

          Object.keys(_users).forEach(function (username) {
            var user = _users[username];

            if (user.userId == l.pm2_env.uid) {
              l.pm2_env.uid = user.username;
            }
          });
        }

        obj[key].push(_chalk["default"].bold(l.pm2_env.uid || l.pm2_env.username));
      } // Watch status


      if (!CONDENSED_MODE) obj[key].push(l.pm2_env.watch ? _chalk["default"].green.bold('enabled') : _chalk["default"].grey('disabled'));

      _helpers["default"].safe_push(app_table, obj);
    }
  }); // Print Applications Managed

  console.log(app_table.toString()); // Print Modules Managed

  if (module_table.length > 0) {
    console.log(_chalk["default"].bold("Module".concat(module_table.length > 1 ? 's' : '')));
    console.log(module_table.toString());
  }

  proc_id++;
} // Container display


function containersListing(sys_infos) {
  var stacked_docker = (process.stdout.columns || 100) < 140;
  var docker_head = {
    id: 4,
    image: 50,
    status: 10,
    '↺': 6,
    cpu: 10,
    mem: 10,
    'net I/O ⇵': 11,
    'fs I/O ⇵': 11
  };

  if (stacked_docker) {
    docker_head = {
      id: 4,
      image: 25,
      status: 10,
      cpu: 10,
      mem: 10
    };
  }

  var docker_table = new _cliTableau["default"]({
    colWidths: Object.keys(docker_head).map(function (k) {
      return docker_head[k];
    }),
    head: Object.keys(docker_head),
    colAligns: ['left'],
    style: {
      'padding-left': 1,
      head: ['cyan', 'bold'],
      compact: true
    }
  });
  sys_infos.containers.forEach(function (c) {
    var cpu = c.stats.cpu_percent;
    var mem = c.stats.mem_percent == 0 ? '0' : c.stats.mem_percent;

    var id = _chalk["default"].bold.cyan(proc_id++);

    var state = _helpers["default"].colorStatus(c.state);

    if (stacked_docker) docker_table.push([id, c.image, state, "".concat(cpu, "%"), "".concat(mem, "mb")]);else {
      docker_table.push([id, c.image, state, c.restartCount, "".concat(cpu == 0 ? '0' : cpu, "%"), "".concat(mem, "mb"), "".concat(c.stats.netIO.rx, "/").concat(isNaN(c.stats.netIO.tx) == true ? '0.0' : c.stats.netIO.tx), "".concat(c.stats.blockIO.r, "/").concat(c.stats.blockIO.w)]);
    }
  });
  console.log(_chalk["default"].bold("Container".concat(sys_infos.containers.length > 1 ? 's' : '')));
  console.log(docker_table.toString());
}
/**
 * High resource processes
 */


function listHighResourcesProcesses(sys_infos) {
  var CPU_MIN_SHOW = 60;
  var MEM_MIN_SHOW = 30;
  var sys_proc_head = ['id', 'cmd', 'pid', 'cpu', 'mem', 'uid'];
  var sys_proc_table = new _cliTableau["default"]({
    colWidths: [4, CONDENSED_MODE ? 29 : 77, 10, 10, 10, 8],
    head: sys_proc_head,
    colAligns: ['left'],
    style: {
      'padding-left': 1,
      head: ['cyan', 'bold'],
      compact: true
    }
  });
  sys_infos.processes.cpu_sorted = sys_infos.processes.cpu_sorted.filter(function (proc) {
    return proc.cpu > CPU_MIN_SHOW && proc.cmd.includes('node') === false && proc.cmd.includes('God Daemon') === false;
  });
  sys_infos.processes.cpu_sorted.forEach(function (proc) {
    var cpu = "".concat(_helpers["default"].colorizedMetric(proc.cpu, 40, 70, '%'));
    var mem = "".concat(_helpers["default"].colorizedMetric(proc.memory, 40, 70, '%'));
    var cmd = proc.cmd;
    sys_proc_table.push([_chalk["default"].bold.cyan(proc_id++), cmd, proc.pid, cpu, mem, proc.uid]);
  });
  sys_infos.processes.mem_sorted = sys_infos.processes.mem_sorted.filter(function (proc) {
    return proc.memory > MEM_MIN_SHOW && proc.cmd.includes('node') == false;
  });
  sys_infos.processes.mem_sorted.forEach(function (proc) {
    var cpu = "".concat(_helpers["default"].colorizedMetric(proc.cpu, 40, 70, '%'));
    var mem = "".concat(_helpers["default"].colorizedMetric(proc.memory, 40, 70, '%'));
    var cmd = proc.cmd; // if (proc.cmd.length > 50)
    //   cmd = '…' + proc.cmd.slice(proc.cmd.length - 48, proc.cmd.length)

    sys_proc_table.push([_chalk["default"].bold.cyan(proc_id++), cmd, proc.pid, cpu, mem, proc.uid]);
  });

  if (sys_infos.processes.cpu_sorted.length >= 1 || sys_infos.processes.mem_sorted.length >= 1) {
    console.log(_chalk["default"].bold('Intensive Processes'));
    console.log(sys_proc_table.toString());
  }
}
/**
 * Sys info line
 */


function miniMonitBar(sys_infos) {
  var sys_summary_line = "".concat(_chalk["default"].bold.cyan('host metrics'), " ");
  sys_summary_line += "| ".concat(_chalk["default"].bold('cpu'), ": ").concat(_helpers["default"].colorizedMetric(sys_infos.cpu.usage, 40, 70, '%'));

  if (sys_infos.cpu.temperature && sys_infos.cpu.temperature != '-1') {
    sys_summary_line += " ".concat(_helpers["default"].colorizedMetric(sys_infos.cpu.temperature, 50, 70, 'º'));
  }

  if (sys_infos.mem) {
    var perc_mem_usage = (sys_infos.mem.available / sys_infos.mem.total * 100).toFixed(1);
    sys_summary_line += " | ".concat(_chalk["default"].bold('mem free'), ": ").concat(_helpers["default"].colorizedMetric(perc_mem_usage, 30, 10, '%'), " ");
  }

  if (sys_infos.network) {
    var latency = sys_infos.network.latency.toFixed(1);

    if (latency == -1) {
      sys_summary_line += "| ".concat(_chalk["default"].bold('net'), ": ").concat(_chalk["default"].red('offline'), " ");
    } else {
      sys_summary_line += "| ".concat(_chalk["default"].bold('net'), ": "); //sys_summary_line += `${colorizedMetric(latency, 100, 150, 'ms')} `

      sys_summary_line += "\u21D3 ".concat(_helpers["default"].colorizedMetric(sys_infos.network.rx_5, 10, 20, 'mb/s'), " ");
      sys_summary_line += "\u21D1 ".concat(_helpers["default"].colorizedMetric(sys_infos.network.tx_5, 10, 20, 'mb/s'), " ");
    }
  }

  if (CONDENSED_MODE == false) {
    if (sys_infos.storage) {
      sys_summary_line += "| ".concat(_chalk["default"].bold('disk'), ": \u21D3 ").concat(_helpers["default"].colorizedMetric(sys_infos.storage.io.read, 10, 20, 'mb/s'));
      sys_summary_line += " \u21D1 ".concat(_helpers["default"].colorizedMetric(sys_infos.storage.io.write, 10, 20, 'mb/s'), " ");
    }

    var disk_nb = 0;
    sys_infos.storage.filesystems.forEach(function (fs) {
      disk_nb++;
      var perc_used = (fs.used / fs.size * 100).toFixed();
      if (+perc_used > 60) sys_summary_line += "".concat(_chalk["default"].grey(fs.fs), " ").concat(_helpers["default"].colorizedMetric(perc_used, 80, 90, '%'), " ");
    });
  }

  sys_summary_line += '|';
  console.log(sys_summary_line);
}
/**
 * pm2 ls
 * @method dispAsTable
 * @param {Object} list
 * @param {Object} system informations (via pm2 sysmonit/pm2 sysinfos)
 */


module.exports = function (list, sys_infos) {
  var pm2_conf = _Configuration["default"].getSync('pm2');

  if (!list) return console.log('list empty');
  listModulesAndAppsManaged(list);

  if (sys_infos) {
    if (sys_infos.containers && sys_infos.containers.length > 0 && pm2_conf && pm2_conf.show_docker == "true") containersListing(sys_infos);
    if (sys_infos.processes && (sys_infos.processes.cpu_sorted || sys_infos.processes.mem_sorted)) listHighResourcesProcesses(sys_infos);
    if (sys_infos.cpu && sys_infos.cpu.usage) miniMonitBar(sys_infos);
  } //checkIfProcessAreDumped(list)

};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9BUEkvVVgvcG0yLWxzLnRzIl0sIm5hbWVzIjpbIkxpc3QiLCJDT05ERU5TRURfTU9ERSIsInByb2Nlc3MiLCJzdGRvdXQiLCJjb2x1bW5zIiwiY2hlY2tJZlByb2Nlc3NBcmVEdW1wZWQiLCJsaXN0IiwiZHVtcF9yYXciLCJyZXF1aXJlIiwicmVhZEZpbGVTeW5jIiwiY3N0IiwiRFVNUF9GSUxFX1BBVEgiLCJkdW1wIiwiSlNPTiIsInBhcnNlIiwiYXBwc19kdW1wZWQiLCJtYXAiLCJwcm9jIiwibmFtZSIsImFwcHNfcnVubmluZyIsImZpbHRlciIsInBtMl9lbnYiLCJwbXhfbW9kdWxlIiwiZGlmZiIsImEiLCJpbmNsdWRlcyIsImxlbmd0aCIsIkNvbW1vbiIsInByaW50T3V0IiwiY2hhbGsiLCJpdGFsaWMiLCJqb2luIiwiZSIsInByb2NfaWQiLCJsaXN0TW9kdWxlc0FuZEFwcHNNYW5hZ2VkIiwibmFtZV9jb2xfc2l6ZSIsInJlZHVjZSIsInAiLCJjIiwiYXBwX2hlYWQiLCJpZCIsIm5hbWVzcGFjZSIsInZlcnNpb24iLCJtb2RlIiwicGlkIiwidXB0aW1lIiwic3RhdHVzIiwiY3B1IiwibWVtIiwidXNlciIsIndhdGNoaW5nIiwibW9kX2hlYWQiLCJtb2R1bGUiLCJtZW1vcnkiLCJhcHBfdGFibGUiLCJUYWJsZSIsImhlYWQiLCJPYmplY3QiLCJrZXlzIiwiY29sV2lkdGhzIiwiayIsImNvbEFsaWducyIsInN0eWxlIiwiY29tcGFjdCIsIm1vZHVsZV90YWJsZSIsInNvcnRGaWVsZCIsInNvcnRPcmRlciIsInNvcnQiLCJmaWVsZHMiLCJiIiwiZmllbGRBIiwiVXhIZWxwZXJzIiwiZ2V0TmVzdGVkUHJvcGVydHkiLCJmaWVsZEIiLCJmb3JFYWNoIiwibCIsIm9iaiIsInBtX2lkIiwiZXhlY19tb2RlIiwia2V5IiwiYm9sZCIsImN5YW4iLCJheG1fb3B0aW9ucyIsImlzX3RyYWNpbmdfZW5hYmxlZCIsInRyYWNpbmciLCJlbmFibGVkIiwiZ3JlZW4iLCJfa21fbW9uaXRvcmVkIiwicHVzaCIsImNvbG9yU3RhdHVzIiwicmVzdGFydF90aW1lIiwibW9uaXQiLCJieXRlc1RvU2l6ZSIsInVpZCIsInVzZXJzIiwiUGFzc3dkIiwiZ2V0VXNlcnMiLCJ1c2VybmFtZSIsInVzZXJJZCIsInNhZmVfcHVzaCIsImludmVyc2UiLCJibHVlIiwicG1fdXB0aW1lIiwidGltZVNpbmNlIiwid2F0Y2giLCJncmV5IiwiY29uc29sZSIsImxvZyIsInRvU3RyaW5nIiwiY29udGFpbmVyc0xpc3RpbmciLCJzeXNfaW5mb3MiLCJzdGFja2VkX2RvY2tlciIsImRvY2tlcl9oZWFkIiwiaW1hZ2UiLCJkb2NrZXJfdGFibGUiLCJjb250YWluZXJzIiwic3RhdHMiLCJjcHVfcGVyY2VudCIsIm1lbV9wZXJjZW50Iiwic3RhdGUiLCJyZXN0YXJ0Q291bnQiLCJuZXRJTyIsInJ4IiwiaXNOYU4iLCJ0eCIsImJsb2NrSU8iLCJyIiwidyIsImxpc3RIaWdoUmVzb3VyY2VzUHJvY2Vzc2VzIiwiQ1BVX01JTl9TSE9XIiwiTUVNX01JTl9TSE9XIiwic3lzX3Byb2NfaGVhZCIsInN5c19wcm9jX3RhYmxlIiwicHJvY2Vzc2VzIiwiY3B1X3NvcnRlZCIsImNtZCIsImNvbG9yaXplZE1ldHJpYyIsIm1lbV9zb3J0ZWQiLCJtaW5pTW9uaXRCYXIiLCJzeXNfc3VtbWFyeV9saW5lIiwidXNhZ2UiLCJ0ZW1wZXJhdHVyZSIsInBlcmNfbWVtX3VzYWdlIiwiYXZhaWxhYmxlIiwidG90YWwiLCJ0b0ZpeGVkIiwibmV0d29yayIsImxhdGVuY3kiLCJyZWQiLCJyeF81IiwidHhfNSIsInN0b3JhZ2UiLCJpbyIsInJlYWQiLCJ3cml0ZSIsImRpc2tfbmIiLCJmaWxlc3lzdGVtcyIsImZzIiwicGVyY191c2VkIiwidXNlZCIsInNpemUiLCJleHBvcnRzIiwicG0yX2NvbmYiLCJDb25maWd1cmF0aW9uIiwiZ2V0U3luYyIsInNob3dfZG9ja2VyIl0sIm1hcHBpbmdzIjoiOztBQUNB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LElBQWlCK0QsU0FBUyxDQUFDL0QsR0FBVixDQUFjNkYsS0FBbkMsRUFDRUYsWUFBWSxDQUFDNUIsU0FBRCxDQUFaO0FBQ0gsR0FsQndDLENBb0J6Qzs7QUFDRCxDQXJCRCIsInNvdXJjZXNDb250ZW50IjpbIlxyXG5pbXBvcnQgY3N0IGZyb20gJy4uLy4uLy4uL2NvbnN0YW50cyc7XHJcbmltcG9ydCBDb21tb24gZnJvbSAnLi4vLi4vQ29tbW9uJztcclxuaW1wb3J0IENvbmZpZ3VyYXRpb24gZnJvbSAnLi4vLi4vQ29uZmlndXJhdGlvbic7XHJcbmltcG9ydCBVeEhlbHBlcnMgZnJvbSAnLi9oZWxwZXJzJztcclxuaW1wb3J0IGNoYWxrIGZyb20gJ2NoYWxrJztcclxuaW1wb3J0IFRhYmxlIGZyb20gJ2NsaS10YWJsZWF1JztcclxuaW1wb3J0IFBhc3N3ZCBmcm9tICcuLi8uLi90b29scy9wYXNzd2QnO1xyXG5cclxuY29uc3QgTGlzdCA9IHt9XHJcblxyXG5jb25zdCBDT05ERU5TRURfTU9ERSA9IChwcm9jZXNzLnN0ZG91dC5jb2x1bW5zIHx8IDMwMCkgPCAxMjBcclxuXHJcbi8qKlxyXG4gKiBDaGVjayBpZiBkdW1wIGZpbGUgY29udGFpbnMgc2FtZSBhcHBzIHRoYXQgdGhlIG9uZSBtYW5hZ2VkIGJ5IFBNMlxyXG4gKi9cclxuZnVuY3Rpb24gY2hlY2tJZlByb2Nlc3NBcmVEdW1wZWQobGlzdCkge1xyXG4gIHRyeSB7XHJcbiAgICB2YXIgZHVtcF9yYXcgPSByZXF1aXJlKCdmcycpLnJlYWRGaWxlU3luYyhjc3QuRFVNUF9GSUxFX1BBVEgpXHJcbiAgICB2YXIgZHVtcCA9IEpTT04ucGFyc2UoZHVtcF9yYXcpXHJcbiAgICB2YXIgYXBwc19kdW1wZWQgPSBkdW1wLm1hcChwcm9jID0+IHByb2MubmFtZSlcclxuICAgIHZhciBhcHBzX3J1bm5pbmcgPSBsaXN0XHJcbiAgICAgICAgLmZpbHRlcihwcm9jID0+IHByb2MucG0yX2Vudi5wbXhfbW9kdWxlICE9IHRydWUpXHJcbiAgICAgICAgLm1hcChwcm9jID0+IHByb2MubmFtZSlcclxuICAgIHZhciBkaWZmID0gYXBwc19kdW1wZWQuZmlsdGVyKGEgPT4gIWFwcHNfcnVubmluZy5pbmNsdWRlcyhhKSlcclxuICAgIGlmIChkaWZmLmxlbmd0aCA+IDApIHtcclxuICAgICAgQ29tbW9uLnByaW50T3V0KGBDdXJyZW50IHByb2Nlc3MgbGlzdCBydW5uaW5nIGlzIG5vdCBpbiBzeW5jIHdpdGggc2F2ZWQgbGlzdC4gJHtjaGFsay5pdGFsaWMoZGlmZi5qb2luKCcgJykpfSBkaWZmZXJzLiBUeXBlICdwbTIgc2F2ZScgdG8gc3luY2hyb25pemUuYClcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGFwcHNfZHVtcGVkLmxlbmd0aCAhPSBhcHBzX3J1bm5pbmcubGVuZ3RoKSB7XHJcbiAgICAgIENvbW1vbi5wcmludE91dChgQ3VycmVudCBwcm9jZXNzIGxpc3QgcnVubmluZyBpcyBub3QgaW4gc3luYyB3aXRoIHNhdmVkIGxpc3QuIFR5cGUgJ3BtMiBzYXZlJyB0byBzeW5jaHJvbml6ZSdgKVxyXG4gICAgfVxyXG4gIH0gY2F0Y2goZSkge1xyXG4gIH1cclxufVxyXG5cclxudmFyIHByb2NfaWQgPSAwXHJcblxyXG4vKipcclxuICogTGlzdCBBcHBsaWNhdGlvbnMgYW5kIE1vZHVsZXMgbWFuYWdlZCBieSBQTTJcclxuICovXHJcbmZ1bmN0aW9uIGxpc3RNb2R1bGVzQW5kQXBwc01hbmFnZWQobGlzdCkge1xyXG4gIHZhciBuYW1lX2NvbF9zaXplID0gMTFcclxuXHJcbiAgaWYgKGxpc3QgJiYgbGlzdC5sZW5ndGggPiAwKVxyXG4gICAgbmFtZV9jb2xfc2l6ZSA9IChsaXN0LnJlZHVjZSgocCwgYykgPT4gKHAubmFtZS5sZW5ndGggPiBjLm5hbWUubGVuZ3RoKSA/IHAgOiBjKSkubmFtZS5sZW5ndGggKyA1XHJcblxyXG4gIHZhciBhcHBfaGVhZDogYW55ID0ge1xyXG4gICAgaWQ6IDUsXHJcbiAgICBuYW1lOiBuYW1lX2NvbF9zaXplLFxyXG4gICAgbmFtZXNwYWNlOiAxMyxcclxuICAgIHZlcnNpb246IDksXHJcbiAgICBtb2RlOiA5LFxyXG4gICAgcGlkOiAxMCxcclxuICAgIHVwdGltZTogOCxcclxuICAgICfihronOiA2LFxyXG4gICAgc3RhdHVzOiAxMSxcclxuICAgIGNwdTogMTAsXHJcbiAgICBtZW06IDEwLFxyXG4gICAgdXNlcjogMTAsXHJcbiAgICB3YXRjaGluZzogMTBcclxuICB9XHJcblxyXG4gIHZhciBtb2RfaGVhZDogYW55ID0ge1xyXG4gICAgaWQ6IDQsXHJcbiAgICBtb2R1bGU6IDM5LFxyXG4gICAgdmVyc2lvbjogMjAsXHJcbiAgICBwaWQ6IDcsXHJcbiAgICBzdGF0dXM6IDEwLFxyXG4gICAgJ+KGuic6IDYsXHJcbiAgICBjcHU6IDEwLFxyXG4gICAgbWVtOiAxMCxcclxuICAgIHVzZXI6IDEwXHJcbiAgfVxyXG5cclxuICBpZiAoQ09OREVOU0VEX01PREUpIHtcclxuICAgIGFwcF9oZWFkID0ge1xyXG4gICAgICBpZDogNCxcclxuICAgICAgbmFtZTogMjAsXHJcbiAgICAgIG1vZGU6IDEwLFxyXG4gICAgICAn4oa6JzogNixcclxuICAgICAgc3RhdHVzOiAxMSxcclxuICAgICAgY3B1OiAxMCxcclxuICAgICAgbWVtb3J5OiAxMFxyXG4gICAgfVxyXG5cclxuICAgIG1vZF9oZWFkID0ge1xyXG4gICAgICBpZDogNCxcclxuICAgICAgbmFtZTogMjAsXHJcbiAgICAgIHN0YXR1czogMTAsXHJcbiAgICAgIGNwdTogMTAsXHJcbiAgICAgIG1lbTogMTBcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHZhciBhcHBfdGFibGUgPSBuZXcgVGFibGUoe1xyXG4gICAgaGVhZCA6IE9iamVjdC5rZXlzKGFwcF9oZWFkKSxcclxuICAgIGNvbFdpZHRoczogT2JqZWN0LmtleXMoYXBwX2hlYWQpLm1hcChrID0+IGFwcF9oZWFkW2tdKSxcclxuICAgIGNvbEFsaWducyA6IFsnbGVmdCddLFxyXG4gICAgc3R5bGUgOiB7J3BhZGRpbmctbGVmdCcgOiAxLCBoZWFkIDogWydjeWFuJywgJ2JvbGQnXSwgY29tcGFjdCA6IHRydWV9XHJcbiAgfSlcclxuXHJcbiAgdmFyIG1vZHVsZV90YWJsZSA9IG5ldyBUYWJsZSh7XHJcbiAgICBoZWFkIDogT2JqZWN0LmtleXMobW9kX2hlYWQpLFxyXG4gICAgY29sV2lkdGhzOiBPYmplY3Qua2V5cyhtb2RfaGVhZCkubWFwKGsgPT4gbW9kX2hlYWRba10pLFxyXG4gICAgY29sQWxpZ25zIDogWydsZWZ0J10sXHJcbiAgICBzdHlsZSA6IHsncGFkZGluZy1sZWZ0JyA6IDEsIGhlYWQgOiBbJ2N5YW4nLCAnYm9sZCddLCAgY29tcGFjdCA6IHRydWV9XHJcbiAgfSlcclxuXHJcbiAgdmFyIHNvcnRGaWVsZCA9ICduYW1lJywgc29ydE9yZGVyID0gJ2FzYycsIHNvcnQsXHJcbiAgICAgIGZpZWxkcyA9IHtcclxuICAgICAgICBuYW1lOiAncG0yX2Vudi5uYW1lJyxcclxuICAgICAgICBuYW1lc3BhY2U6ICdwbTJfZW52Lm5hbWVzcGFjZScsXHJcbiAgICAgICAgcGlkOiAncGlkJyxcclxuICAgICAgICBpZDogJ3BtX2lkJyxcclxuICAgICAgICBjcHU6ICdtb25pdC5jcHUnLFxyXG4gICAgICAgIG1lbW9yeTogJ21vbml0Lm1lbW9yeScsXHJcbiAgICAgICAgdXB0aW1lOiAncG0yX2Vudi5wbV91cHRpbWUnLFxyXG4gICAgICAgIHN0YXR1czogJ3BtMl9lbnYuc3RhdHVzJ1xyXG4gICAgICB9XHJcblxyXG4gIGxpc3Quc29ydChmdW5jdGlvbihhLCBiKSB7XHJcbiAgICB2YXIgZmllbGRBID0gVXhIZWxwZXJzLmdldE5lc3RlZFByb3BlcnR5KGZpZWxkc1tzb3J0RmllbGRdLCBhKVxyXG4gICAgdmFyIGZpZWxkQiA9IFV4SGVscGVycy5nZXROZXN0ZWRQcm9wZXJ0eShmaWVsZHNbc29ydEZpZWxkXSwgYilcclxuXHJcbiAgICBpZiAoc29ydE9yZGVyID09PSAnZGVzYycpIHtcclxuICAgICAgaWYgKGZpZWxkQSA+IGZpZWxkQilcclxuICAgICAgICByZXR1cm4gLTFcclxuICAgICAgaWYgKGZpZWxkQSA8IGZpZWxkQilcclxuICAgICAgICByZXR1cm4gMVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgaWYgKGZpZWxkQSA8IGZpZWxkQilcclxuICAgICAgICByZXR1cm4gLTFcclxuICAgICAgaWYgKGZpZWxkQSA+IGZpZWxkQilcclxuICAgICAgICByZXR1cm4gMVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIDBcclxuICB9KVxyXG5cclxuICBsaXN0LmZvckVhY2goZnVuY3Rpb24obCkge1xyXG4gICAgdmFyIG9iaiA9IHt9XHJcblxyXG4gICAgaWYgKGwucG0yX2Vudi5wbV9pZCA+IHByb2NfaWQpIHtcclxuICAgICAgcHJvY19pZCA9IGwucG0yX2Vudi5wbV9pZFxyXG4gICAgfVxyXG5cclxuICAgIHZhciBtb2RlID0gbC5wbTJfZW52LmV4ZWNfbW9kZVxyXG4gICAgdmFyIHN0YXR1cyA9IGwucG0yX2Vudi5zdGF0dXNcclxuICAgIHZhciBrZXkgPSBsLnBtMl9lbnYucG1faWRcclxuICAgIGtleSA9IGNoYWxrLmJvbGQuY3lhbihrZXkpXHJcblxyXG4gICAgaWYgKGwucG0yX2Vudi5heG1fb3B0aW9ucykge1xyXG4gICAgICB2YXIgaXNfdHJhY2luZ19lbmFibGVkID0gZmFsc2VcclxuXHJcbiAgICAgIGlmIChsLnBtMl9lbnYuYXhtX29wdGlvbnMudHJhY2luZyAmJlxyXG4gICAgICAgICAgdHlwZW9mKGwucG0yX2Vudi5heG1fb3B0aW9ucy50cmFjaW5nKSA9PSAnYm9vbGVhbicgJiZcclxuICAgICAgICAgIGwucG0yX2Vudi5heG1fb3B0aW9ucy50cmFjaW5nID09IHRydWUpXHJcbiAgICAgICAgaXNfdHJhY2luZ19lbmFibGVkID0gdHJ1ZVxyXG5cclxuICAgICAgaWYgKGwucG0yX2Vudi5heG1fb3B0aW9ucy50cmFjaW5nICYmXHJcbiAgICAgICAgICBsLnBtMl9lbnYuYXhtX29wdGlvbnMudHJhY2luZy5lbmFibGVkICYmXHJcbiAgICAgICAgICB0eXBlb2YobC5wbTJfZW52LmF4bV9vcHRpb25zLnRyYWNpbmcuZW5hYmxlZCkgPT0gJ2Jvb2xlYW4nICYmXHJcbiAgICAgICAgICBsLnBtMl9lbnYuYXhtX29wdGlvbnMudHJhY2luZy5lbmFibGVkID09IHRydWUpXHJcbiAgICAgICAgaXNfdHJhY2luZ19lbmFibGVkID0gdHJ1ZVxyXG5cclxuICAgICAgaWYgKGlzX3RyYWNpbmdfZW5hYmxlZCA9PSB0cnVlKVxyXG4gICAgICAgIGwucG0yX2Vudi5uYW1lID0gY2hhbGsuZ3JlZW4oJ+KYtScpICArICcgJyArIGwucG0yX2Vudi5uYW1lXHJcblxyXG4gICAgICBpZiAobC5wbTJfZW52Ll9rbV9tb25pdG9yZWQpXHJcbiAgICAgICAgbC5wbTJfZW52Lm5hbWUgPSBjaGFsay5ib2xkLmdyZWVuKCfil4knKSAgKyAnICcgKyBsLnBtMl9lbnYubmFtZVxyXG4gICAgfVxyXG5cclxuICAgIGlmIChsLnBtMl9lbnYucG14X21vZHVsZSA9PSB0cnVlKSB7XHJcbiAgICAgIC8vIHBtMiBscyBmb3IgTW9kdWxlc1xyXG4gICAgICBvYmpba2V5XSA9IFtdXHJcblxyXG4gICAgICBvYmpba2V5XS5wdXNoKGwubmFtZSlcclxuXHJcbiAgICAgIC8vIE1vZHVsZSB2ZXJzaW9uICsgUElEXHJcbiAgICAgIGlmICghQ09OREVOU0VEX01PREUpIHtcclxuICAgICAgICB2YXIgcGlkID0gbC5wbTJfZW52LmF4bV9vcHRpb25zLnBpZCA/IGwucG0yX2Vudi5heG1fb3B0aW9ucy5waWQgOiBsLnBpZFxyXG4gICAgICAgIG9ialtrZXldLnB1c2gobC5wbTJfZW52LnZlcnNpb24gfHwgJ04vQScsIHBpZClcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gU3RhdHVzXHJcbiAgICAgIG9ialtrZXldLnB1c2goVXhIZWxwZXJzLmNvbG9yU3RhdHVzKHN0YXR1cykpXHJcblxyXG4gICAgICAvLyBSZXN0YXJ0XHJcbiAgICAgIGlmICghQ09OREVOU0VEX01PREUpXHJcbiAgICAgICAgb2JqW2tleV0ucHVzaChsLnBtMl9lbnYucmVzdGFydF90aW1lID8gbC5wbTJfZW52LnJlc3RhcnRfdGltZSA6IDApXHJcblxyXG4gICAgICAvLyBDUFUgKyBNZW1vcnlcclxuICAgICAgb2JqW2tleV0ucHVzaChsLm1vbml0ID8gKGwubW9uaXQuY3B1ICsgJyUnKSA6ICdOL0EnLCBsLm1vbml0ID8gVXhIZWxwZXJzLmJ5dGVzVG9TaXplKGwubW9uaXQubWVtb3J5LCAxKSA6ICdOL0EnIClcclxuXHJcbiAgICAgIC8vIFVzZXJcclxuICAgICAgaWYgKCFDT05ERU5TRURfTU9ERSkge1xyXG5cclxuICAgICAgICBpZiAobC5wbTJfZW52LnVpZCAmJiB0eXBlb2YobC5wbTJfZW52LnVpZCkgPT0gJ251bWJlcicpIHtcclxuICAgICAgICAgIC8vIFJlc29sdmUgdXNlciBpZCB0byB1c2VybmFtZVxyXG4gICAgICAgICAgbGV0IHVzZXJzID0gUGFzc3dkLmdldFVzZXJzKClcclxuICAgICAgICAgIE9iamVjdC5rZXlzKHVzZXJzKS5mb3JFYWNoKGZ1bmN0aW9uKHVzZXJuYW1lKSB7XHJcbiAgICAgICAgICAgIHZhciB1c2VyID0gdXNlcnNbdXNlcm5hbWVdXHJcbiAgICAgICAgICAgIGlmICh1c2VyLnVzZXJJZCA9PSBsLnBtMl9lbnYudWlkKSB7XHJcbiAgICAgICAgICAgICAgbC5wbTJfZW52LnVpZCA9IHVzZXIudXNlcm5hbWVcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICAgICAgb2JqW2tleV0ucHVzaChjaGFsay5ib2xkKGwucG0yX2Vudi51aWQgfHwgbC5wbTJfZW52LnVzZXJuYW1lKSlcclxuICAgICAgfVxyXG5cclxuICAgICAgVXhIZWxwZXJzLnNhZmVfcHVzaChtb2R1bGVfdGFibGUsIG9iailcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAvLyBwbTIgbHMgZm9yIEFwcGxpY2F0aW9uc1xyXG4gICAgICBvYmpba2V5XSA9IFtdXHJcblxyXG4gICAgICAvLyBQTTIgSURcclxuICAgICAgb2JqW2tleV0ucHVzaChsLnBtMl9lbnYubmFtZSlcclxuXHJcbiAgICAgIC8vIE5hbWVzcGFjZVxyXG4gICAgICBpZiAoIUNPTkRFTlNFRF9NT0RFKVxyXG4gICAgICAgIG9ialtrZXldLnB1c2gobC5wbTJfZW52Lm5hbWVzcGFjZSlcclxuXHJcbiAgICAgIC8vIFZlcnNpb25cclxuICAgICAgaWYgKCFDT05ERU5TRURfTU9ERSlcclxuICAgICAgICBvYmpba2V5XS5wdXNoKGwucG0yX2Vudi52ZXJzaW9uKVxyXG5cclxuICAgICAgLy8gRXhlYyBtb2RlXHJcbiAgICAgIG9ialtrZXldLnB1c2gobW9kZSA9PSAnZm9ya19tb2RlJyA/IGNoYWxrLmludmVyc2UuYm9sZCgnZm9yaycpIDogY2hhbGsuYmx1ZS5ib2xkKCdjbHVzdGVyJykpXHJcblxyXG4gICAgICAvLyBQSURcclxuICAgICAgaWYgKCFDT05ERU5TRURfTU9ERSlcclxuICAgICAgICBvYmpba2V5XS5wdXNoKGwucGlkKVxyXG5cclxuICAgICAgLy8gVXB0aW1lXHJcbiAgICAgIGlmICghQ09OREVOU0VEX01PREUpXHJcbiAgICAgICAgb2JqW2tleV0ucHVzaCgobC5wbTJfZW52LnBtX3VwdGltZSAmJiBzdGF0dXMgPT0gJ29ubGluZScpID8gVXhIZWxwZXJzLnRpbWVTaW5jZShsLnBtMl9lbnYucG1fdXB0aW1lKSA6IDApXHJcblxyXG4gICAgICAvLyBSZXN0YXJ0XHJcbiAgICAgIG9ialtrZXldLnB1c2gobC5wbTJfZW52LnJlc3RhcnRfdGltZSA/IGwucG0yX2Vudi5yZXN0YXJ0X3RpbWUgOiAwKVxyXG5cclxuICAgICAgLy8gU3RhdHVzXHJcbiAgICAgIG9ialtrZXldLnB1c2goVXhIZWxwZXJzLmNvbG9yU3RhdHVzKHN0YXR1cykpXHJcblxyXG5cclxuICAgICAgLy8gQ1BVXHJcbiAgICAgIG9ialtrZXldLnB1c2gobC5tb25pdCA/IGwubW9uaXQuY3B1ICsgJyUnIDogJ04vQScpXHJcblxyXG4gICAgICAvLyBNZW1vcnlcclxuICAgICAgb2JqW2tleV0ucHVzaChsLm1vbml0ID8gVXhIZWxwZXJzLmJ5dGVzVG9TaXplKGwubW9uaXQubWVtb3J5LCAxKSA6ICdOL0EnKVxyXG5cclxuICAgICAgLy8gVXNlclxyXG4gICAgICBpZiAoIUNPTkRFTlNFRF9NT0RFKSB7XHJcbiAgICAgICAgaWYgKGwucG0yX2Vudi51aWQgJiYgdHlwZW9mKGwucG0yX2Vudi51aWQpID09ICdudW1iZXInKSB7XHJcbiAgICAgICAgICAvLyBSZXNvbHZlIHVzZXIgaWQgdG8gdXNlcm5hbWVcclxuICAgICAgICAgIGxldCB1c2VycyA9IFBhc3N3ZC5nZXRVc2VycygpXHJcbiAgICAgICAgICBPYmplY3Qua2V5cyh1c2VycykuZm9yRWFjaChmdW5jdGlvbih1c2VybmFtZSkge1xyXG4gICAgICAgICAgICB2YXIgdXNlciA9IHVzZXJzW3VzZXJuYW1lXVxyXG4gICAgICAgICAgICBpZiAodXNlci51c2VySWQgPT0gbC5wbTJfZW52LnVpZCkge1xyXG4gICAgICAgICAgICAgIGwucG0yX2Vudi51aWQgPSB1c2VyLnVzZXJuYW1lXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgICAgIG9ialtrZXldLnB1c2goY2hhbGsuYm9sZChsLnBtMl9lbnYudWlkIHx8IGwucG0yX2Vudi51c2VybmFtZSkpXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIFdhdGNoIHN0YXR1c1xyXG4gICAgICBpZiAoIUNPTkRFTlNFRF9NT0RFKVxyXG4gICAgICAgIG9ialtrZXldLnB1c2gobC5wbTJfZW52LndhdGNoID8gY2hhbGsuZ3JlZW4uYm9sZCgnZW5hYmxlZCcpIDogY2hhbGsuZ3JleSgnZGlzYWJsZWQnKSlcclxuXHJcbiAgICAgIFV4SGVscGVycy5zYWZlX3B1c2goYXBwX3RhYmxlLCBvYmopXHJcbiAgICB9XHJcblxyXG4gIH0pXHJcblxyXG4gIC8vIFByaW50IEFwcGxpY2F0aW9ucyBNYW5hZ2VkXHJcbiAgY29uc29sZS5sb2coYXBwX3RhYmxlLnRvU3RyaW5nKCkpXHJcblxyXG4gIC8vIFByaW50IE1vZHVsZXMgTWFuYWdlZFxyXG4gIGlmIChtb2R1bGVfdGFibGUubGVuZ3RoID4gMCkge1xyXG4gICAgY29uc29sZS5sb2coY2hhbGsuYm9sZChgTW9kdWxlJHttb2R1bGVfdGFibGUubGVuZ3RoID4gMSA/ICdzJyA6ICcnfWApKVxyXG4gICAgY29uc29sZS5sb2cobW9kdWxlX3RhYmxlLnRvU3RyaW5nKCkpXHJcbiAgfVxyXG5cclxuICBwcm9jX2lkKytcclxufVxyXG5cclxuLy8gQ29udGFpbmVyIGRpc3BsYXlcclxuZnVuY3Rpb24gY29udGFpbmVyc0xpc3Rpbmcoc3lzX2luZm9zKSB7XHJcbiAgdmFyIHN0YWNrZWRfZG9ja2VyID0gKHByb2Nlc3Muc3Rkb3V0LmNvbHVtbnMgfHwgMTAwKSA8IDE0MFxyXG5cclxuICB2YXIgZG9ja2VyX2hlYWQ6IGFueSA9IHtcclxuICAgIGlkOiA0LFxyXG4gICAgaW1hZ2U6IDUwLFxyXG4gICAgc3RhdHVzOiAxMCxcclxuICAgICfihronOiA2LFxyXG4gICAgY3B1OiAxMCxcclxuICAgIG1lbTogMTAsXHJcbiAgICAnbmV0IEkvTyDih7UnOiAxMSxcclxuICAgICdmcyBJL08g4oe1JzogMTFcclxuICB9XHJcblxyXG4gIGlmIChzdGFja2VkX2RvY2tlcikge1xyXG4gICAgZG9ja2VyX2hlYWQgPSB7XHJcbiAgICAgIGlkOiA0LFxyXG4gICAgICBpbWFnZTogMjUsXHJcbiAgICAgIHN0YXR1czogMTAsXHJcbiAgICAgIGNwdTogMTAsXHJcbiAgICAgIG1lbTogMTBcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHZhciBkb2NrZXJfdGFibGUgPSBuZXcgVGFibGUoe1xyXG4gICAgY29sV2lkdGhzOiBPYmplY3Qua2V5cyhkb2NrZXJfaGVhZCkubWFwKGsgPT4gZG9ja2VyX2hlYWRba10pLFxyXG4gICAgaGVhZCA6IE9iamVjdC5rZXlzKGRvY2tlcl9oZWFkKSxcclxuICAgIGNvbEFsaWducyA6IFsnbGVmdCddLFxyXG4gICAgc3R5bGUgOiB7J3BhZGRpbmctbGVmdCcgOiAxLCBoZWFkIDogWydjeWFuJywgJ2JvbGQnXSwgIGNvbXBhY3QgOiB0cnVlfVxyXG4gIH0pXHJcblxyXG4gIHN5c19pbmZvcy5jb250YWluZXJzLmZvckVhY2goKGMpID0+IHtcclxuICAgIHZhciBjcHUgPSBjLnN0YXRzLmNwdV9wZXJjZW50XHJcbiAgICB2YXIgbWVtID0gYy5zdGF0cy5tZW1fcGVyY2VudCA9PSAwID8gJzAnIDogYy5zdGF0cy5tZW1fcGVyY2VudFxyXG4gICAgdmFyIGlkID0gY2hhbGsuYm9sZC5jeWFuKHByb2NfaWQrKylcclxuICAgIHZhciBzdGF0ZSA9IFV4SGVscGVycy5jb2xvclN0YXR1cyhjLnN0YXRlKVxyXG5cclxuICAgIGlmIChzdGFja2VkX2RvY2tlcilcclxuICAgICAgZG9ja2VyX3RhYmxlLnB1c2goW2lkLCBjLmltYWdlLCBzdGF0ZSwgYCR7Y3B1fSVgLCBgJHttZW19bWJgXSlcclxuICAgIGVsc2Uge1xyXG4gICAgICBkb2NrZXJfdGFibGUucHVzaChbXHJcbiAgICAgICAgaWQsXHJcbiAgICAgICAgYy5pbWFnZSxcclxuICAgICAgICBzdGF0ZSxcclxuICAgICAgICBjLnJlc3RhcnRDb3VudCxcclxuICAgICAgICBgJHtjcHUgPT0gMCA/ICcwJyA6IGNwdX0lYCxcclxuICAgICAgICBgJHttZW19bWJgLFxyXG4gICAgICAgIGAke2Muc3RhdHMubmV0SU8ucnh9LyR7aXNOYU4oYy5zdGF0cy5uZXRJTy50eCkgPT0gdHJ1ZSA/ICcwLjAnIDogYy5zdGF0cy5uZXRJTy50eH1gLFxyXG4gICAgICAgIGAke2Muc3RhdHMuYmxvY2tJTy5yfS8ke2Muc3RhdHMuYmxvY2tJTy53fWBcclxuICAgICAgXSlcclxuICAgIH1cclxuICB9KVxyXG5cclxuICBjb25zb2xlLmxvZyhjaGFsay5ib2xkKGBDb250YWluZXIke3N5c19pbmZvcy5jb250YWluZXJzLmxlbmd0aCA+IDEgPyAncycgOiAnJ31gKSlcclxuICBjb25zb2xlLmxvZyhkb2NrZXJfdGFibGUudG9TdHJpbmcoKSlcclxufVxyXG5cclxuLyoqXHJcbiAqIEhpZ2ggcmVzb3VyY2UgcHJvY2Vzc2VzXHJcbiAqL1xyXG5mdW5jdGlvbiBsaXN0SGlnaFJlc291cmNlc1Byb2Nlc3NlcyhzeXNfaW5mb3MpIHtcclxuICBjb25zdCBDUFVfTUlOX1NIT1cgPSA2MFxyXG4gIGNvbnN0IE1FTV9NSU5fU0hPVyA9IDMwXHJcblxyXG4gIHZhciBzeXNfcHJvY19oZWFkID0gWydpZCcsICdjbWQnLCAncGlkJywgJ2NwdScsICdtZW0nLCAndWlkJ11cclxuXHJcbiAgdmFyIHN5c19wcm9jX3RhYmxlID0gbmV3IFRhYmxlKHtcclxuICAgIGNvbFdpZHRoczogWzQsIENPTkRFTlNFRF9NT0RFID8gMjkgOiA3NywgMTAsIDEwLCAxMCwgOF0sXHJcbiAgICBoZWFkIDogc3lzX3Byb2NfaGVhZCxcclxuICAgIGNvbEFsaWducyA6IFsnbGVmdCddLFxyXG4gICAgc3R5bGUgOiB7J3BhZGRpbmctbGVmdCcgOiAxLCBoZWFkIDogWydjeWFuJywgJ2JvbGQnXSwgIGNvbXBhY3QgOiB0cnVlfVxyXG4gIH0pXHJcblxyXG4gIHN5c19pbmZvcy5wcm9jZXNzZXMuY3B1X3NvcnRlZCA9IHN5c19pbmZvcy5wcm9jZXNzZXMuY3B1X3NvcnRlZC5maWx0ZXIoKHByb2MpID0+IHtcclxuICAgIHJldHVybiBwcm9jLmNwdSA+IENQVV9NSU5fU0hPVyAmJiBwcm9jLmNtZC5pbmNsdWRlcygnbm9kZScpID09PSBmYWxzZSAmJlxyXG4gICAgICBwcm9jLmNtZC5pbmNsdWRlcygnR29kIERhZW1vbicpID09PSBmYWxzZVxyXG4gIH0pXHJcblxyXG4gIHN5c19pbmZvcy5wcm9jZXNzZXMuY3B1X3NvcnRlZC5mb3JFYWNoKHByb2MgPT4ge1xyXG4gICAgdmFyIGNwdSA9IGAke1V4SGVscGVycy5jb2xvcml6ZWRNZXRyaWMocHJvYy5jcHUsIDQwLCA3MCwgJyUnKX1gXHJcbiAgICB2YXIgbWVtID0gYCR7VXhIZWxwZXJzLmNvbG9yaXplZE1ldHJpYyhwcm9jLm1lbW9yeSwgNDAsIDcwLCAnJScpfWBcclxuICAgIHZhciBjbWQgPSBwcm9jLmNtZFxyXG4gICAgc3lzX3Byb2NfdGFibGUucHVzaChbY2hhbGsuYm9sZC5jeWFuKHByb2NfaWQrKyksIGNtZCwgcHJvYy5waWQsIGNwdSwgbWVtLCBwcm9jLnVpZF0pXHJcbiAgfSlcclxuXHJcbiAgc3lzX2luZm9zLnByb2Nlc3Nlcy5tZW1fc29ydGVkID0gc3lzX2luZm9zLnByb2Nlc3Nlcy5tZW1fc29ydGVkLmZpbHRlcigocHJvYykgPT4ge1xyXG4gICAgcmV0dXJuIHByb2MubWVtb3J5ID4gTUVNX01JTl9TSE9XICYmIHByb2MuY21kLmluY2x1ZGVzKCdub2RlJykgPT0gZmFsc2VcclxuICB9KVxyXG5cclxuICBzeXNfaW5mb3MucHJvY2Vzc2VzLm1lbV9zb3J0ZWQuZm9yRWFjaCgocHJvYykgPT4ge1xyXG4gICAgdmFyIGNwdSA9IGAke1V4SGVscGVycy5jb2xvcml6ZWRNZXRyaWMocHJvYy5jcHUsIDQwLCA3MCwgJyUnKX1gXHJcbiAgICB2YXIgbWVtID0gYCR7VXhIZWxwZXJzLmNvbG9yaXplZE1ldHJpYyhwcm9jLm1lbW9yeSwgNDAsIDcwLCAnJScpfWBcclxuICAgIHZhciBjbWQgPSBwcm9jLmNtZFxyXG4gICAgLy8gaWYgKHByb2MuY21kLmxlbmd0aCA+IDUwKVxyXG4gICAgLy8gICBjbWQgPSAn4oCmJyArIHByb2MuY21kLnNsaWNlKHByb2MuY21kLmxlbmd0aCAtIDQ4LCBwcm9jLmNtZC5sZW5ndGgpXHJcbiAgICBzeXNfcHJvY190YWJsZS5wdXNoKFtjaGFsay5ib2xkLmN5YW4ocHJvY19pZCsrKSwgY21kLCBwcm9jLnBpZCwgY3B1LCBtZW0sIHByb2MudWlkXSlcclxuICB9KVxyXG5cclxuICBpZiAoc3lzX2luZm9zLnByb2Nlc3Nlcy5jcHVfc29ydGVkLmxlbmd0aCA+PSAxIHx8IHN5c19pbmZvcy5wcm9jZXNzZXMubWVtX3NvcnRlZC5sZW5ndGggPj0gMSkge1xyXG4gICAgY29uc29sZS5sb2coY2hhbGsuYm9sZCgnSW50ZW5zaXZlIFByb2Nlc3NlcycpKVxyXG4gICAgY29uc29sZS5sb2coc3lzX3Byb2NfdGFibGUudG9TdHJpbmcoKSlcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTeXMgaW5mbyBsaW5lXHJcbiAqL1xyXG5mdW5jdGlvbiBtaW5pTW9uaXRCYXIoc3lzX2luZm9zKSB7XHJcbiAgdmFyIHN5c19zdW1tYXJ5X2xpbmUgPSBgJHtjaGFsay5ib2xkLmN5YW4oJ2hvc3QgbWV0cmljcycpfSBgXHJcbiAgc3lzX3N1bW1hcnlfbGluZSArPSBgfCAke2NoYWxrLmJvbGQoJ2NwdScpfTogJHtVeEhlbHBlcnMuY29sb3JpemVkTWV0cmljKHN5c19pbmZvcy5jcHUudXNhZ2UsIDQwLCA3MCwgJyUnKX1gXHJcbiAgaWYgKHN5c19pbmZvcy5jcHUudGVtcGVyYXR1cmUgJiYgc3lzX2luZm9zLmNwdS50ZW1wZXJhdHVyZSAhPSAnLTEnKSB7XHJcbiAgICBzeXNfc3VtbWFyeV9saW5lICs9IGAgJHtVeEhlbHBlcnMuY29sb3JpemVkTWV0cmljKHN5c19pbmZvcy5jcHUudGVtcGVyYXR1cmUsIDUwLCA3MCwgJ8K6Jyl9YFxyXG4gIH1cclxuICBpZiAoc3lzX2luZm9zLm1lbSkge1xyXG4gICAgdmFyIHBlcmNfbWVtX3VzYWdlID0gKCgoc3lzX2luZm9zLm1lbS5hdmFpbGFibGUpIC8gc3lzX2luZm9zLm1lbS50b3RhbCkgKiAxMDApLnRvRml4ZWQoMSlcclxuICAgIHN5c19zdW1tYXJ5X2xpbmUgKz0gYCB8ICR7Y2hhbGsuYm9sZCgnbWVtIGZyZWUnKX06ICR7VXhIZWxwZXJzLmNvbG9yaXplZE1ldHJpYyhwZXJjX21lbV91c2FnZSwgMzAsIDEwLCAnJScpfSBgXHJcbiAgfVxyXG4gIGlmIChzeXNfaW5mb3MubmV0d29yaykge1xyXG4gICAgdmFyIGxhdGVuY3kgPSAoc3lzX2luZm9zLm5ldHdvcmsubGF0ZW5jeSkudG9GaXhlZCgxKVxyXG4gICAgaWYgKGxhdGVuY3kgPT0gLTEpIHtcclxuICAgICAgc3lzX3N1bW1hcnlfbGluZSArPSBgfCAke2NoYWxrLmJvbGQoJ25ldCcpfTogJHtjaGFsay5yZWQoJ29mZmxpbmUnKX0gYFxyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIHN5c19zdW1tYXJ5X2xpbmUgKz0gYHwgJHtjaGFsay5ib2xkKCduZXQnKX06IGBcclxuICAgICAgLy9zeXNfc3VtbWFyeV9saW5lICs9IGAke2NvbG9yaXplZE1ldHJpYyhsYXRlbmN5LCAxMDAsIDE1MCwgJ21zJyl9IGBcclxuICAgICAgc3lzX3N1bW1hcnlfbGluZSArPSBg4oeTICR7VXhIZWxwZXJzLmNvbG9yaXplZE1ldHJpYyhzeXNfaW5mb3MubmV0d29yay5yeF81LCAxMCwgMjAsICdtYi9zJyl9IGBcclxuICAgICAgc3lzX3N1bW1hcnlfbGluZSArPSBg4oeRICR7VXhIZWxwZXJzLmNvbG9yaXplZE1ldHJpYyhzeXNfaW5mb3MubmV0d29yay50eF81LCAxMCwgMjAsICdtYi9zJyl9IGBcclxuICAgIH1cclxuICB9XHJcbiAgaWYgKENPTkRFTlNFRF9NT0RFID09IGZhbHNlKSB7XHJcbiAgICBpZiAoc3lzX2luZm9zLnN0b3JhZ2UpIHtcclxuICAgICAgc3lzX3N1bW1hcnlfbGluZSArPSBgfCAke2NoYWxrLmJvbGQoJ2Rpc2snKX06IOKHkyAke1V4SGVscGVycy5jb2xvcml6ZWRNZXRyaWMoc3lzX2luZm9zLnN0b3JhZ2UuaW8ucmVhZCwgMTAsIDIwLCAnbWIvcycpfWBcclxuICAgICAgc3lzX3N1bW1hcnlfbGluZSArPSBgIOKHkSAke1V4SGVscGVycy5jb2xvcml6ZWRNZXRyaWMoc3lzX2luZm9zLnN0b3JhZ2UuaW8ud3JpdGUsIDEwLCAyMCwgJ21iL3MnKX0gYFxyXG4gICAgfVxyXG4gICAgdmFyIGRpc2tfbmIgPSAwXHJcblxyXG4gICAgc3lzX2luZm9zLnN0b3JhZ2UuZmlsZXN5c3RlbXMuZm9yRWFjaChmcyA9PiB7XHJcbiAgICAgIGRpc2tfbmIrK1xyXG4gICAgICB2YXIgcGVyY191c2VkID0gKChmcy51c2VkIC8gZnMuc2l6ZSkgKiAxMDApLnRvRml4ZWQoKVxyXG4gICAgICBpZiAoK3BlcmNfdXNlZCA+IDYwKVxyXG4gICAgICAgIHN5c19zdW1tYXJ5X2xpbmUgKz0gYCR7Y2hhbGsuZ3JleShmcy5mcyl9ICR7VXhIZWxwZXJzLmNvbG9yaXplZE1ldHJpYyhwZXJjX3VzZWQsIDgwLCA5MCwgJyUnKX0gYFxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIHN5c19zdW1tYXJ5X2xpbmUgKz0gJ3wnXHJcbiAgY29uc29sZS5sb2coc3lzX3N1bW1hcnlfbGluZSlcclxufVxyXG5cclxuLyoqXHJcbiAqIHBtMiBsc1xyXG4gKiBAbWV0aG9kIGRpc3BBc1RhYmxlXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBsaXN0XHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBzeXN0ZW0gaW5mb3JtYXRpb25zICh2aWEgcG0yIHN5c21vbml0L3BtMiBzeXNpbmZvcylcclxuICovXHJcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24obGlzdCwgc3lzX2luZm9zKSB7XHJcbiAgdmFyIHBtMl9jb25mID0gQ29uZmlndXJhdGlvbi5nZXRTeW5jKCdwbTInKVxyXG5cclxuICBpZiAoIWxpc3QpXHJcbiAgICByZXR1cm4gY29uc29sZS5sb2coJ2xpc3QgZW1wdHknKVxyXG5cclxuICBsaXN0TW9kdWxlc0FuZEFwcHNNYW5hZ2VkKGxpc3QpXHJcblxyXG4gIGlmIChzeXNfaW5mb3MpIHtcclxuICAgIGlmIChzeXNfaW5mb3MuY29udGFpbmVycyAmJiBzeXNfaW5mb3MuY29udGFpbmVycy5sZW5ndGggPiAwICYmXHJcbiAgICAgICAgKHBtMl9jb25mICYmIHBtMl9jb25mLnNob3dfZG9ja2VyID09IFwidHJ1ZVwiKSlcclxuICAgICAgY29udGFpbmVyc0xpc3Rpbmcoc3lzX2luZm9zKVxyXG5cclxuICAgIGlmIChzeXNfaW5mb3MucHJvY2Vzc2VzICYmIChzeXNfaW5mb3MucHJvY2Vzc2VzLmNwdV9zb3J0ZWQgfHwgc3lzX2luZm9zLnByb2Nlc3Nlcy5tZW1fc29ydGVkKSlcclxuICAgICAgbGlzdEhpZ2hSZXNvdXJjZXNQcm9jZXNzZXMoc3lzX2luZm9zKVxyXG5cclxuICAgIGlmIChzeXNfaW5mb3MuY3B1ICYmIHN5c19pbmZvcy5jcHUudXNhZ2UpXHJcbiAgICAgIG1pbmlNb25pdEJhcihzeXNfaW5mb3MpXHJcbiAgfVxyXG5cclxuICAvL2NoZWNrSWZQcm9jZXNzQXJlRHVtcGVkKGxpc3QpXHJcbn1cclxuIl19