"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _os = _interopRequireDefault(require("os"));

var _path = _interopRequireDefault(require("path"));

var _blessed = _interopRequireDefault(require("blessed"));

var _debug = _interopRequireDefault(require("debug"));

var _sprintfJs = require("sprintf-js");

var _moment = _interopRequireDefault(require("moment"));

/**
 * Copyright 2013 the PM2 project authors. All rights reserved.
 * Use of this source code is governed by a license that
 * can be found in the LICENSE file.
 */
var debug = (0, _debug["default"])('pm2:monit'); // Total memory

var totalMem = _os["default"].totalmem();

var Dashboard = {};
var DEFAULT_PADDING = {
  top: 0,
  left: 1,
  right: 1
};
var WIDTH_LEFT_PANEL = 30;
/**
 * Synchronous Dashboard init method
 * @method init
 * @return this
 */

Dashboard.init = function () {
  var _this = this;

  // Init Screen
  this.screen = _blessed["default"].screen({
    smartCSR: true,
    fullUnicode: true
  });
  this.screen.title = 'PM2 Dashboard';
  this.logLines = {};
  this.list = _blessed["default"].list({
    top: '0',
    left: '0',
    width: WIDTH_LEFT_PANEL + '%',
    height: '70%',
    padding: 0,
    scrollbar: {
      ch: ' ',
      inverse: false
    },
    border: {
      type: 'line'
    },
    keys: true,
    autoCommandKeys: true,
    tags: true,
    style: {
      selected: {
        bg: 'blue',
        fg: 'white'
      },
      scrollbar: {
        bg: 'blue',
        fg: 'black'
      },
      fg: 'white',
      border: {
        fg: 'blue'
      },
      header: {
        fg: 'blue'
      }
    }
  });
  this.list.on('select item', function (item, i) {
    _this.logLines = [];

    _this.logBox.clearItems();
  });
  this.logBox = _blessed["default"].list({
    label: ' Logs ',
    top: '0',
    left: WIDTH_LEFT_PANEL + '%',
    width: 100 - WIDTH_LEFT_PANEL + '%',
    height: '70%',
    padding: DEFAULT_PADDING,
    scrollable: true,
    scrollbar: {
      ch: ' ',
      inverse: false
    },
    keys: true,
    autoCommandKeys: true,
    tags: true,
    border: {
      type: 'line'
    },
    style: {
      fg: 'white',
      border: {
        fg: 'white'
      },
      scrollbar: {
        bg: 'blue',
        fg: 'black'
      }
    }
  });
  this.metadataBox = _blessed["default"].box({
    label: ' Metadata ',
    top: '70%',
    left: WIDTH_LEFT_PANEL + '%',
    width: 100 - WIDTH_LEFT_PANEL + '%',
    height: '26%',
    padding: DEFAULT_PADDING,
    scrollable: true,
    scrollbar: {
      ch: ' ',
      inverse: false
    },
    keys: true,
    autoCommandKeys: true,
    tags: true,
    border: {
      type: 'line'
    },
    style: {
      fg: 'white',
      border: {
        fg: 'white'
      },
      scrollbar: {
        bg: 'blue',
        fg: 'black'
      }
    }
  });
  this.metricsBox = _blessed["default"].list({
    label: ' Custom Metrics ',
    top: '70%',
    left: '0%',
    width: WIDTH_LEFT_PANEL + '%',
    height: '26%',
    padding: DEFAULT_PADDING,
    scrollbar: {
      ch: ' ',
      inverse: false
    },
    keys: true,
    autoCommandKeys: true,
    tags: true,
    border: {
      type: 'line'
    },
    style: {
      fg: 'white',
      border: {
        fg: 'white'
      },
      scrollbar: {
        bg: 'blue',
        fg: 'black'
      }
    }
  });
  this.box4 = _blessed["default"].text({
    content: ' left/right: switch boards | up/down/mouse: scroll | Ctrl-C: exit{|} {cyan-fg}{bold}To go further check out https://pm2.io/{/}  ',
    left: '0%',
    top: '95%',
    width: '100%',
    height: '6%',
    valign: 'middle',
    tags: true,
    style: {
      fg: 'white'
    }
  });
  this.list.focus();
  this.screen.append(this.list);
  this.screen.append(this.logBox);
  this.screen.append(this.metadataBox);
  this.screen.append(this.metricsBox);
  this.screen.append(this.box4);
  this.list.setLabel(' Process List ');
  this.screen.render();
  var that = this;
  var i = 0;
  var boards = ['list', 'logBox', 'metricsBox', 'metadataBox'];
  this.screen.key(['left', 'right'], function (ch, key) {
    key.name === 'left' ? i-- : i++;
    if (i == 4) i = 0;
    if (i == -1) i = 3;
    that[boards[i]].focus();
    that[boards[i]].style.border.fg = 'blue';

    if (key.name === 'left') {
      if (i == 3) that[boards[0]].style.border.fg = 'white';else that[boards[i + 1]].style.border.fg = 'white';
    } else {
      if (i == 0) that[boards[3]].style.border.fg = 'white';else that[boards[i - 1]].style.border.fg = 'white';
    }
  });
  this.screen.key(['escape', 'q', 'C-c'], function (ch, key) {
    this.screen.destroy();
    process.exit(0);
  }); // async refresh of the ui

  setInterval(function () {
    that.screen.render();
  }, 300);
  return this;
};
/**
 * Refresh dashboard
 * @method refresh
 * @param {} processes
 * @return this
 */


Dashboard.refresh = function (processes) {
  debug('Monit refresh');

  if (!processes) {
    this.list.setItem(0, 'No process available');
    return;
  }

  if (processes.length != this.list.items.length) {
    this.list.clearItems();
  } // Total of processes memory


  var mem = 0;
  processes.forEach(function (proc) {
    mem += proc.monit.memory;
  }); // Sort process list

  processes.sort(function (a, b) {
    if (a.pm2_env.name < b.pm2_env.name) return -1;
    if (a.pm2_env.name > b.pm2_env.name) return 1;
    return 0;
  }); // Loop to get process infos

  for (var i = 0; i < processes.length; i++) {
    // Percent of memory use by one process in all pm2 processes
    var memPercent = processes[i].monit.memory / mem * 100; // Status of process

    var status = processes[i].pm2_env.status == 'online' ? '{green-fg}' : '{red-fg}';
    status = status + '{bold}' + processes[i].pm2_env.status + '{/}';

    var name = processes[i].pm2_env.name || _path["default"].basename(processes[i].pm2_env.pm_exec_path); // Line of list


    var item = (0, _sprintfJs.sprintf)('[%2s] %s {|} Mem: {bold}{%s-fg}%3d{/} MB    CPU: {bold}{%s-fg}%2d{/} %s  %s', processes[i].pm2_env.pm_id, name, gradient(memPercent, [255, 0, 0], [0, 255, 0]), (processes[i].monit.memory / 1048576).toFixed(2), gradient(processes[i].monit.cpu, [255, 0, 0], [0, 255, 0]), processes[i].monit.cpu, "%", status); // Check if item exist

    if (this.list.getItem(i)) {
      this.list.setItem(i, item);
    } else {
      this.list.pushItem(item);
    }

    var proc = processes[this.list.selected]; // render the logBox

    var process_id = proc.pm_id;
    var logs = this.logLines[process_id];

    if (typeof logs !== "undefined") {
      this.logBox.setItems(logs);

      if (!this.logBox.focused) {
        this.logBox.setScrollPerc(100);
      }
    } else {
      this.logBox.clearItems();
    }

    this.logBox.setLabel("  ".concat(proc.pm2_env.name, " Logs  "));
    this.metadataBox.setLine(0, 'App Name              ' + '{bold}' + proc.pm2_env.name + '{/}');
    this.metadataBox.setLine(1, 'Namespace             ' + '{bold}' + proc.pm2_env.namespace + '{/}');
    this.metadataBox.setLine(2, 'Version               ' + '{bold}' + proc.pm2_env.version + '{/}');
    this.metadataBox.setLine(3, 'Restarts              ' + proc.pm2_env.restart_time);
    this.metadataBox.setLine(4, 'Uptime                ' + (proc.pm2_env.pm_uptime && proc.pm2_env.status == 'online' ? timeSince(proc.pm2_env.pm_uptime) : 0));
    this.metadataBox.setLine(5, 'Script path           ' + proc.pm2_env.pm_exec_path);
    this.metadataBox.setLine(6, 'Script args           ' + (proc.pm2_env.args ? (typeof proc.pm2_env.args == 'string' ? JSON.parse(proc.pm2_env.args.replace(/'/g, '"')) : proc.pm2_env.args).join(' ') : 'N/A'));
    this.metadataBox.setLine(7, 'Interpreter           ' + proc.pm2_env.exec_interpreter);
    this.metadataBox.setLine(8, 'Interpreter args      ' + (proc.pm2_env.node_args.length != 0 ? proc.pm2_env.node_args : 'N/A'));
    this.metadataBox.setLine(9, 'Exec mode             ' + (proc.pm2_env.exec_mode == 'fork_mode' ? '{bold}fork{/}' : '{blue-fg}{bold}cluster{/}'));
    this.metadataBox.setLine(10, 'Node.js version       ' + proc.pm2_env.node_version);
    this.metadataBox.setLine(11, 'watch & reload        ' + (proc.pm2_env.watch ? '{green-fg}{bold}✔{/}' : '{red-fg}{bold}✘{/}'));
    this.metadataBox.setLine(12, 'Unstable restarts     ' + proc.pm2_env.unstable_restarts);
    this.metadataBox.setLine(13, 'Comment               ' + (proc.pm2_env.versioning ? proc.pm2_env.versioning.comment : 'N/A'));
    this.metadataBox.setLine(14, 'Revision              ' + (proc.pm2_env.versioning ? proc.pm2_env.versioning.revision : 'N/A'));
    this.metadataBox.setLine(15, 'Branch                ' + (proc.pm2_env.versioning ? proc.pm2_env.versioning.branch : 'N/A'));
    this.metadataBox.setLine(16, 'Remote url            ' + (proc.pm2_env.versioning ? proc.pm2_env.versioning.url : 'N/A'));
    this.metadataBox.deleteLine(17);
    this.metadataBox.setLine(17, 'Last update           ' + (proc.pm2_env.versioning ? proc.pm2_env.versioning.update_time : 'N/A'));

    if (Object.keys(proc.pm2_env.axm_monitor).length != this.metricsBox.items.length) {
      this.metricsBox.clearItems();
    }

    var j = 0;

    for (var key in proc.pm2_env.axm_monitor) {
      var metric_name = proc.pm2_env.axm_monitor[key].hasOwnProperty('value') ? proc.pm2_env.axm_monitor[key].value : proc.pm2_env.axm_monitor[key];
      var metric_unit = proc.pm2_env.axm_monitor[key].hasOwnProperty('unit') ? proc.pm2_env.axm_monitor[key].unit : null;
      var probe = "{bold}".concat(key, "{/} {|} ").concat(metric_name).concat(metric_unit == null ? '' : ' ' + metric_unit);

      if (this.metricsBox.getItem(j)) {
        this.metricsBox.setItem(j, probe);
      } else {
        this.metricsBox.pushItem(probe);
      }

      j++;
    }

    this.screen.render();
  }

  return this;
};
/**
 * Put Log
 * @method log
 * @param {} data
 * @return this
 */


Dashboard.log = function (type, data) {
  var _this2 = this;

  var that = this;

  if (typeof this.logLines[data.process.pm_id] == "undefined") {
    this.logLines[data.process.pm_id] = [];
  } // Logs colors


  switch (type) {
    case 'PM2':
      var color = '{blue-fg}';
      break;

    case 'out':
      var color = '{green-fg}';
      break;

    case 'err':
      var color = '{red-fg}';
      break;

    default:
      var color = '{white-fg}';
  }

  var logs = data.data.split('\n');
  logs.forEach(function (log) {
    if (log.length > 0) {
      _this2.logLines[data.process.pm_id].push(color + data.process.name + '{/} > ' + log); //removing logs if longer than limit


      var count = 0;
      var max_count = 0;
      var leading_process_id = -1;

      for (var process_id in _this2.logLines) {
        count += _this2.logLines[process_id].length;

        if (_this2.logLines[process_id].length > max_count) {
          leading_process_id = +process_id;
          max_count = _this2.logLines[process_id].length;
        }
      }

      if (count > 200) {
        _this2.logLines[leading_process_id].shift();
      }
    }
  });
  return this;
};

function timeSince(date) {
  var seconds = Math.floor((0, _moment["default"])().unix() - (0, _moment["default"])(date).unix());
  var interval = Math.floor(seconds / 31536000);

  if (interval > 1) {
    return interval + 'Y';
  }

  interval = Math.floor(seconds / 2592000);

  if (interval > 1) {
    return interval + 'M';
  }

  interval = Math.floor(seconds / 86400);

  if (interval > 1) {
    return interval + 'D';
  }

  interval = Math.floor(seconds / 3600);

  if (interval > 1) {
    return interval + 'h';
  }

  interval = Math.floor(seconds / 60);

  if (interval > 1) {
    return interval + 'm';
  }

  return Math.floor(seconds) + 's';
}
/* Args :
 *  p : Percent 0 - 100
 *  rgb_ : Array of rgb [255, 255, 255]
 * Return :
 *  Hexa #FFFFFF
 */


function gradient(p, rgb_beginning, rgb_end) {
  var w = p / 100 * 2 - 1;
  var w1 = (w + 1) / 2.0;
  var w2 = 1 - w1;
  var rgb = [parseInt(rgb_beginning[0] * w1 + rgb_end[0] * w2 + ""), parseInt(rgb_beginning[1] * w1 + rgb_end[1] * w2 + ""), parseInt(rgb_beginning[2] * w1 + rgb_end[2] * w2 + "")];
  return "#" + ((1 << 24) + (rgb[0] << 16) + (rgb[1] << 8) + rgb[2]).toString(16).slice(1);
}

var _default = Dashboard;
exports["default"] = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9BUEkvRGFzaGJvYXJkLnRzIl0sIm5hbWVzIjpbImRlYnVnIiwidG90YWxNZW0iLCJvcyIsInRvdGFsbWVtIiwiRGFzaGJvYXJkIiwiREVGQVVMVF9QQURESU5HIiwidG9wIiwibGVmdCIsInJpZ2h0IiwiV0lEVEhfTEVGVF9QQU5FTCIsImluaXQiLCJzY3JlZW4iLCJibGVzc2VkIiwic21hcnRDU1IiLCJmdWxsVW5pY29kZSIsInRpdGxlIiwibG9nTGluZXMiLCJsaXN0Iiwid2lkdGgiLCJoZWlnaHQiLCJwYWRkaW5nIiwic2Nyb2xsYmFyIiwiY2giLCJpbnZlcnNlIiwiYm9yZGVyIiwidHlwZSIsImtleXMiLCJhdXRvQ29tbWFuZEtleXMiLCJ0YWdzIiwic3R5bGUiLCJzZWxlY3RlZCIsImJnIiwiZmciLCJoZWFkZXIiLCJvbiIsIml0ZW0iLCJpIiwibG9nQm94IiwiY2xlYXJJdGVtcyIsImxhYmVsIiwic2Nyb2xsYWJsZSIsIm1ldGFkYXRhQm94IiwiYm94IiwibWV0cmljc0JveCIsImJveDQiLCJ0ZXh0IiwiY29udGVudCIsInZhbGlnbiIsImZvY3VzIiwiYXBwZW5kIiwic2V0TGFiZWwiLCJyZW5kZXIiLCJ0aGF0IiwiYm9hcmRzIiwia2V5IiwibmFtZSIsImRlc3Ryb3kiLCJwcm9jZXNzIiwiZXhpdCIsInNldEludGVydmFsIiwicmVmcmVzaCIsInByb2Nlc3NlcyIsInNldEl0ZW0iLCJsZW5ndGgiLCJpdGVtcyIsIm1lbSIsImZvckVhY2giLCJwcm9jIiwibW9uaXQiLCJtZW1vcnkiLCJzb3J0IiwiYSIsImIiLCJwbTJfZW52IiwibWVtUGVyY2VudCIsInN0YXR1cyIsInAiLCJiYXNlbmFtZSIsInBtX2V4ZWNfcGF0aCIsInBtX2lkIiwiZ3JhZGllbnQiLCJ0b0ZpeGVkIiwiY3B1IiwiZ2V0SXRlbSIsInB1c2hJdGVtIiwicHJvY2Vzc19pZCIsImxvZ3MiLCJzZXRJdGVtcyIsImZvY3VzZWQiLCJzZXRTY3JvbGxQZXJjIiwic2V0TGluZSIsIm5hbWVzcGFjZSIsInZlcnNpb24iLCJyZXN0YXJ0X3RpbWUiLCJwbV91cHRpbWUiLCJ0aW1lU2luY2UiLCJhcmdzIiwiSlNPTiIsInBhcnNlIiwicmVwbGFjZSIsImpvaW4iLCJleGVjX2ludGVycHJldGVyIiwibm9kZV9hcmdzIiwiZXhlY19tb2RlIiwibm9kZV92ZXJzaW9uIiwid2F0Y2giLCJ1bnN0YWJsZV9yZXN0YXJ0cyIsInZlcnNpb25pbmciLCJjb21tZW50IiwicmV2aXNpb24iLCJicmFuY2giLCJ1cmwiLCJkZWxldGVMaW5lIiwidXBkYXRlX3RpbWUiLCJPYmplY3QiLCJheG1fbW9uaXRvciIsImoiLCJtZXRyaWNfbmFtZSIsImhhc093blByb3BlcnR5IiwidmFsdWUiLCJtZXRyaWNfdW5pdCIsInVuaXQiLCJwcm9iZSIsImxvZyIsImRhdGEiLCJjb2xvciIsInNwbGl0IiwicHVzaCIsImNvdW50IiwibWF4X2NvdW50IiwibGVhZGluZ19wcm9jZXNzX2lkIiwic2hpZnQiLCJkYXRlIiwic2Vjb25kcyIsIk1hdGgiLCJmbG9vciIsInVuaXgiLCJpbnRlcnZhbCIsInJnYl9iZWdpbm5pbmciLCJyZ2JfZW5kIiwidyIsIncxIiwidzIiLCJyZ2IiLCJwYXJzZUludCIsInRvU3RyaW5nIiwic2xpY2UiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQU1BOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQVhBOzs7OztBQWFBLElBQU1BLEtBQUssR0FBRyx1QkFBWSxXQUFaLENBQWQsQyxDQUNBOztBQUNBLElBQU1DLFFBQVEsR0FBR0MsZUFBR0MsUUFBSCxFQUFqQjs7QUFFQSxJQUFJQyxTQUFjLEdBQUcsRUFBckI7QUFFQSxJQUFJQyxlQUFlLEdBQUc7QUFDcEJDLEVBQUFBLEdBQUcsRUFBRyxDQURjO0FBRXBCQyxFQUFBQSxJQUFJLEVBQUcsQ0FGYTtBQUdwQkMsRUFBQUEsS0FBSyxFQUFHO0FBSFksQ0FBdEI7QUFNQSxJQUFJQyxnQkFBZ0IsR0FBRyxFQUF2QjtBQUVBOzs7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LFNBQU9ILElBQUksQ0FBQ0MsS0FBTCxDQUFXRixPQUFYLElBQXNCLEdBQTdCO0FBQ0Q7QUFFRDs7Ozs7Ozs7QUFNQSxTQUFTckQsUUFBVCxDQUFrQkosQ0FBbEIsRUFBcUI4RCxhQUFyQixFQUFvQ0MsT0FBcEMsRUFBNkM7QUFFekMsTUFBSUMsQ0FBQyxHQUFJaEUsQ0FBQyxHQUFHLEdBQUwsR0FBWSxDQUFaLEdBQWdCLENBQXhCO0FBRUEsTUFBSWlFLEVBQUUsR0FBRyxDQUFDRCxDQUFDLEdBQUcsQ0FBTCxJQUFVLEdBQW5CO0FBQ0EsTUFBSUUsRUFBRSxHQUFHLElBQUlELEVBQWI7QUFFQSxNQUFJRSxHQUFHLEdBQUcsQ0FBQ0MsUUFBUSxDQUFFTixhQUFhLENBQUMsQ0FBRCxDQUFiLEdBQW1CRyxFQUFuQixHQUF3QkYsT0FBTyxDQUFDLENBQUQsQ0FBUCxHQUFhRyxFQUF0QyxHQUE0QyxFQUE3QyxDQUFULEVBQ05FLFFBQVEsQ0FBRU4sYUFBYSxDQUFDLENBQUQsQ0FBYixHQUFtQkcsRUFBbkIsR0FBd0JGLE9BQU8sQ0FBQyxDQUFELENBQVAsR0FBYUcsRUFBdEMsR0FBNEMsRUFBN0MsQ0FERixFQUVGRSxRQUFRLENBQUVOLGFBQWEsQ0FBQyxDQUFELENBQWIsR0FBbUJHLEVBQW5CLEdBQXdCRixPQUFPLENBQUMsQ0FBRCxDQUFQLEdBQWFHLEVBQXRDLEdBQTRDLEVBQTdDLENBRk4sQ0FBVjtBQUlBLFNBQU8sTUFBTSxDQUFDLENBQUMsS0FBSyxFQUFOLEtBQWFDLEdBQUcsQ0FBQyxDQUFELENBQUgsSUFBVSxFQUF2QixLQUE4QkEsR0FBRyxDQUFDLENBQUQsQ0FBSCxJQUFVLENBQXhDLElBQTZDQSxHQUFHLENBQUMsQ0FBRCxDQUFqRCxFQUFzREUsUUFBdEQsQ0FBK0QsRUFBL0QsRUFBbUVDLEtBQW5FLENBQXlFLENBQXpFLENBQWI7QUFDSDs7ZUFFYzlJLFMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAyMDEzIHRoZSBQTTIgcHJvamVjdCBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYSBsaWNlbnNlIHRoYXRcbiAqIGNhbiBiZSBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlLlxuICovXG5cbmltcG9ydCBvcyAgICAgICAgIGZyb20gJ29zJztcbmltcG9ydCBwICAgICAgICAgIGZyb20gJ3BhdGgnO1xuaW1wb3J0IGJsZXNzZWQgICAgZnJvbSAnYmxlc3NlZCc7XG5pbXBvcnQgZGVidWdMb2dnZXIgICAgICBmcm9tICdkZWJ1Zyc7XG5pbXBvcnQgeyBzcHJpbnRmIH0gICBmcm9tICdzcHJpbnRmLWpzJztcbmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JztcblxuY29uc3QgZGVidWcgPSBkZWJ1Z0xvZ2dlcigncG0yOm1vbml0Jyk7XG4vLyBUb3RhbCBtZW1vcnlcbmNvbnN0IHRvdGFsTWVtID0gb3MudG90YWxtZW0oKTtcblxudmFyIERhc2hib2FyZDogYW55ID0ge307XG5cbnZhciBERUZBVUxUX1BBRERJTkcgPSB7XG4gIHRvcCA6IDAsXG4gIGxlZnQgOiAxLFxuICByaWdodCA6IDFcbn07XG5cbnZhciBXSURUSF9MRUZUX1BBTkVMID0gMzA7XG5cbi8qKlxuICogU3luY2hyb25vdXMgRGFzaGJvYXJkIGluaXQgbWV0aG9kXG4gKiBAbWV0aG9kIGluaXRcbiAqIEByZXR1cm4gdGhpc1xuICovXG5EYXNoYm9hcmQuaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAvLyBJbml0IFNjcmVlblxuICB0aGlzLnNjcmVlbiA9IGJsZXNzZWQuc2NyZWVuKHtcbiAgICBzbWFydENTUjogdHJ1ZSxcbiAgICBmdWxsVW5pY29kZTogdHJ1ZVxuICB9KTtcbiAgdGhpcy5zY3JlZW4udGl0bGUgPSAnUE0yIERhc2hib2FyZCc7XG5cbiAgdGhpcy5sb2dMaW5lcyA9IHt9XG5cbiAgdGhpcy5saXN0ID0gYmxlc3NlZC5saXN0KHtcbiAgICB0b3A6ICcwJyxcbiAgICBsZWZ0OiAnMCcsXG4gICAgd2lkdGg6IFdJRFRIX0xFRlRfUEFORUwgKyAnJScsXG4gICAgaGVpZ2h0OiAnNzAlJyxcbiAgICBwYWRkaW5nOiAwLFxuICAgIHNjcm9sbGJhcjoge1xuICAgICAgY2g6ICcgJyxcbiAgICAgIGludmVyc2U6IGZhbHNlXG4gICAgfSxcbiAgICBib3JkZXI6IHtcbiAgICAgIHR5cGU6ICdsaW5lJ1xuICAgIH0sXG4gICAga2V5czogdHJ1ZSxcbiAgICBhdXRvQ29tbWFuZEtleXM6IHRydWUsXG4gICAgdGFnczogdHJ1ZSxcbiAgICBzdHlsZToge1xuICAgICAgc2VsZWN0ZWQ6IHtcbiAgICAgICAgYmc6ICdibHVlJyxcbiAgICAgICAgZmc6ICd3aGl0ZSdcbiAgICAgIH0sXG4gICAgICBzY3JvbGxiYXI6IHtcbiAgICAgICAgYmc6ICdibHVlJyxcbiAgICAgICAgZmc6ICdibGFjaydcbiAgICAgIH0sXG4gICAgICBmZzogJ3doaXRlJyxcbiAgICAgIGJvcmRlcjoge1xuICAgICAgICBmZzogJ2JsdWUnXG4gICAgICB9LFxuICAgICAgaGVhZGVyOiB7XG4gICAgICAgIGZnOiAnYmx1ZSdcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIHRoaXMubGlzdC5vbignc2VsZWN0IGl0ZW0nLCAoaXRlbSwgaSkgPT4ge1xuICAgIHRoaXMubG9nTGluZXMgPSBbXVxuICAgIHRoaXMubG9nQm94LmNsZWFySXRlbXMoKVxuICB9KVxuXG4gIHRoaXMubG9nQm94ID0gYmxlc3NlZC5saXN0KHtcbiAgICBsYWJlbDogJyBMb2dzICcsXG4gICAgdG9wOiAnMCcsXG4gICAgbGVmdDogV0lEVEhfTEVGVF9QQU5FTCArICclJyxcbiAgICB3aWR0aDogMTAwIC0gV0lEVEhfTEVGVF9QQU5FTCArICclJyxcbiAgICBoZWlnaHQ6ICc3MCUnLFxuICAgIHBhZGRpbmc6IERFRkFVTFRfUEFERElORyxcbiAgICBzY3JvbGxhYmxlOiB0cnVlLFxuICAgIHNjcm9sbGJhcjoge1xuICAgICAgY2g6ICcgJyxcbiAgICAgIGludmVyc2U6IGZhbHNlXG4gICAgfSxcbiAgICBrZXlzOiB0cnVlLFxuICAgIGF1dG9Db21tYW5kS2V5czogdHJ1ZSxcbiAgICB0YWdzOiB0cnVlLFxuICAgIGJvcmRlcjoge1xuICAgICAgdHlwZTogJ2xpbmUnXG4gICAgfSxcbiAgICBzdHlsZToge1xuICAgICAgZmc6ICd3aGl0ZScsXG4gICAgICBib3JkZXI6IHtcbiAgICAgICAgZmc6ICd3aGl0ZSdcbiAgICAgIH0sXG4gICAgICBzY3JvbGxiYXI6IHtcbiAgICAgICAgYmc6ICdibHVlJyxcbiAgICAgICAgZmc6ICdibGFjaydcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIHRoaXMubWV0YWRhdGFCb3ggPSBibGVzc2VkLmJveCh7XG4gICAgbGFiZWw6ICcgTWV0YWRhdGEgJyxcbiAgICB0b3A6ICc3MCUnLFxuICAgIGxlZnQ6IFdJRFRIX0xFRlRfUEFORUwgKyAnJScsXG4gICAgd2lkdGg6IDEwMCAtIFdJRFRIX0xFRlRfUEFORUwgKyAnJScsXG4gICAgaGVpZ2h0OiAnMjYlJyxcbiAgICBwYWRkaW5nOiBERUZBVUxUX1BBRERJTkcsXG4gICAgc2Nyb2xsYWJsZTogdHJ1ZSxcbiAgICBzY3JvbGxiYXI6IHtcbiAgICAgIGNoOiAnICcsXG4gICAgICBpbnZlcnNlOiBmYWxzZVxuICAgIH0sXG4gICAga2V5czogdHJ1ZSxcbiAgICBhdXRvQ29tbWFuZEtleXM6IHRydWUsXG4gICAgdGFnczogdHJ1ZSxcbiAgICBib3JkZXI6IHtcbiAgICAgIHR5cGU6ICdsaW5lJ1xuICAgIH0sXG4gICAgc3R5bGU6IHtcbiAgICAgIGZnOiAnd2hpdGUnLFxuICAgICAgYm9yZGVyOiB7XG4gICAgICAgIGZnOiAnd2hpdGUnXG4gICAgICB9LFxuICAgICAgc2Nyb2xsYmFyOiB7XG4gICAgICAgIGJnOiAnYmx1ZScsXG4gICAgICAgIGZnOiAnYmxhY2snXG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICB0aGlzLm1ldHJpY3NCb3ggPSBibGVzc2VkLmxpc3Qoe1xuICAgIGxhYmVsOiAnIEN1c3RvbSBNZXRyaWNzICcsXG4gICAgdG9wOiAnNzAlJyxcbiAgICBsZWZ0OiAnMCUnLFxuICAgIHdpZHRoOiBXSURUSF9MRUZUX1BBTkVMICsgJyUnLFxuICAgIGhlaWdodDogJzI2JScsXG4gICAgcGFkZGluZzogREVGQVVMVF9QQURESU5HLFxuICAgIHNjcm9sbGJhcjoge1xuICAgICAgY2g6ICcgJyxcbiAgICAgIGludmVyc2U6IGZhbHNlXG4gICAgfSxcbiAgICBrZXlzOiB0cnVlLFxuICAgIGF1dG9Db21tYW5kS2V5czogdHJ1ZSxcbiAgICB0YWdzOiB0cnVlLFxuICAgIGJvcmRlcjoge1xuICAgICAgdHlwZTogJ2xpbmUnXG4gICAgfSxcbiAgICBzdHlsZToge1xuICAgICAgZmc6ICd3aGl0ZScsXG4gICAgICBib3JkZXI6IHtcbiAgICAgICAgZmc6ICd3aGl0ZSdcbiAgICAgIH0sXG4gICAgICBzY3JvbGxiYXI6IHtcbiAgICAgICAgYmc6ICdibHVlJyxcbiAgICAgICAgZmc6ICdibGFjaydcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIHRoaXMuYm94NCA9IGJsZXNzZWQudGV4dCh7XG4gICAgY29udGVudDogJyBsZWZ0L3JpZ2h0OiBzd2l0Y2ggYm9hcmRzIHwgdXAvZG93bi9tb3VzZTogc2Nyb2xsIHwgQ3RybC1DOiBleGl0e3x9IHtjeWFuLWZnfXtib2xkfVRvIGdvIGZ1cnRoZXIgY2hlY2sgb3V0IGh0dHBzOi8vcG0yLmlvL3svfSAgJyxcbiAgICBsZWZ0OiAnMCUnLFxuICAgIHRvcDogJzk1JScsXG4gICAgd2lkdGg6ICcxMDAlJyxcbiAgICBoZWlnaHQ6ICc2JScsXG4gICAgdmFsaWduOiAnbWlkZGxlJyxcbiAgICB0YWdzOiB0cnVlLFxuICAgIHN0eWxlOiB7XG4gICAgICBmZzogJ3doaXRlJ1xuICAgIH1cbiAgfSk7XG5cbiAgdGhpcy5saXN0LmZvY3VzKCk7XG5cbiAgdGhpcy5zY3JlZW4uYXBwZW5kKHRoaXMubGlzdCk7XG4gIHRoaXMuc2NyZWVuLmFwcGVuZCh0aGlzLmxvZ0JveCk7XG4gIHRoaXMuc2NyZWVuLmFwcGVuZCh0aGlzLm1ldGFkYXRhQm94KTtcbiAgdGhpcy5zY3JlZW4uYXBwZW5kKHRoaXMubWV0cmljc0JveCk7XG4gIHRoaXMuc2NyZWVuLmFwcGVuZCh0aGlzLmJveDQpO1xuXG4gIHRoaXMubGlzdC5zZXRMYWJlbCgnIFByb2Nlc3MgTGlzdCAnKTtcblxuICB0aGlzLnNjcmVlbi5yZW5kZXIoKTtcblxuICB2YXIgdGhhdCA9IHRoaXM7XG5cbiAgdmFyIGkgPSAwO1xuICB2YXIgYm9hcmRzID0gWydsaXN0JywgJ2xvZ0JveCcsICdtZXRyaWNzQm94JywgJ21ldGFkYXRhQm94J107XG4gIHRoaXMuc2NyZWVuLmtleShbJ2xlZnQnLCAncmlnaHQnXSwgZnVuY3Rpb24oY2gsIGtleSkge1xuICAgIChrZXkubmFtZSA9PT0gJ2xlZnQnKSA/IGktLSA6IGkrKztcbiAgICBpZiAoaSA9PSA0KVxuICAgICAgaSA9IDA7XG4gICAgaWYgKGkgPT0gLTEpXG4gICAgICBpID0gMztcbiAgICB0aGF0W2JvYXJkc1tpXV0uZm9jdXMoKTtcbiAgICB0aGF0W2JvYXJkc1tpXV0uc3R5bGUuYm9yZGVyLmZnID0gJ2JsdWUnO1xuICAgIGlmIChrZXkubmFtZSA9PT0gJ2xlZnQnKSB7XG4gICAgICBpZiAoaSA9PSAzKVxuICAgICAgICB0aGF0W2JvYXJkc1swXV0uc3R5bGUuYm9yZGVyLmZnID0gJ3doaXRlJztcbiAgICAgIGVsc2VcbiAgICAgICAgdGhhdFtib2FyZHNbaSArIDFdXS5zdHlsZS5ib3JkZXIuZmcgPSAnd2hpdGUnO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICBpZiAoaSA9PSAwKVxuICAgICAgICB0aGF0W2JvYXJkc1szXV0uc3R5bGUuYm9yZGVyLmZnID0gJ3doaXRlJztcbiAgICAgIGVsc2VcbiAgICAgICAgdGhhdFtib2FyZHNbaSAtIDFdXS5zdHlsZS5ib3JkZXIuZmcgPSAnd2hpdGUnO1xuICAgIH1cbiAgfSk7XG5cbiAgdGhpcy5zY3JlZW4ua2V5KFsnZXNjYXBlJywgJ3EnLCAnQy1jJ10sIGZ1bmN0aW9uKGNoLCBrZXkpIHtcbiAgICB0aGlzLnNjcmVlbi5kZXN0cm95KCk7XG4gICAgcHJvY2Vzcy5leGl0KDApO1xuICB9KTtcblxuICAvLyBhc3luYyByZWZyZXNoIG9mIHRoZSB1aVxuICBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XG4gICAgdGhhdC5zY3JlZW4ucmVuZGVyKCk7XG4gIH0sIDMwMCk7XG5cbiAgcmV0dXJuIHRoaXM7XG59XG5cbi8qKlxuICogUmVmcmVzaCBkYXNoYm9hcmRcbiAqIEBtZXRob2QgcmVmcmVzaFxuICogQHBhcmFtIHt9IHByb2Nlc3Nlc1xuICogQHJldHVybiB0aGlzXG4gKi9cbkRhc2hib2FyZC5yZWZyZXNoID0gZnVuY3Rpb24ocHJvY2Vzc2VzKSB7XG4gIGRlYnVnKCdNb25pdCByZWZyZXNoJyk7XG5cbiAgaWYoIXByb2Nlc3Nlcykge1xuICAgIHRoaXMubGlzdC5zZXRJdGVtKDAsICdObyBwcm9jZXNzIGF2YWlsYWJsZScpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmIChwcm9jZXNzZXMubGVuZ3RoICE9IHRoaXMubGlzdC5pdGVtcy5sZW5ndGgpIHtcbiAgICB0aGlzLmxpc3QuY2xlYXJJdGVtcygpO1xuICB9XG5cbiAgLy8gVG90YWwgb2YgcHJvY2Vzc2VzIG1lbW9yeVxuICB2YXIgbWVtID0gMDtcbiAgcHJvY2Vzc2VzLmZvckVhY2goZnVuY3Rpb24ocHJvYykge1xuICAgIG1lbSArPSBwcm9jLm1vbml0Lm1lbW9yeTtcbiAgfSlcblxuICAvLyBTb3J0IHByb2Nlc3MgbGlzdFxuICBwcm9jZXNzZXMuc29ydChmdW5jdGlvbihhLCBiKSB7XG4gICAgaWYgKGEucG0yX2Vudi5uYW1lIDwgYi5wbTJfZW52Lm5hbWUpXG4gICAgICByZXR1cm4gLTE7XG4gICAgaWYgKGEucG0yX2Vudi5uYW1lID4gYi5wbTJfZW52Lm5hbWUpXG4gICAgICByZXR1cm4gMTtcbiAgICByZXR1cm4gMDtcbiAgfSk7XG5cbiAgLy8gTG9vcCB0byBnZXQgcHJvY2VzcyBpbmZvc1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHByb2Nlc3Nlcy5sZW5ndGg7IGkrKykge1xuICAgIC8vIFBlcmNlbnQgb2YgbWVtb3J5IHVzZSBieSBvbmUgcHJvY2VzcyBpbiBhbGwgcG0yIHByb2Nlc3Nlc1xuICAgIHZhciBtZW1QZXJjZW50ID0gKHByb2Nlc3Nlc1tpXS5tb25pdC5tZW1vcnkgLyBtZW0pICogMTAwO1xuXG4gICAgLy8gU3RhdHVzIG9mIHByb2Nlc3NcbiAgICB2YXIgc3RhdHVzID0gcHJvY2Vzc2VzW2ldLnBtMl9lbnYuc3RhdHVzID09ICdvbmxpbmUnID8gJ3tncmVlbi1mZ30nIDogJ3tyZWQtZmd9JztcbiAgICBzdGF0dXMgPSBzdGF0dXMgKyAne2JvbGR9JyArIHByb2Nlc3Nlc1tpXS5wbTJfZW52LnN0YXR1cyArICd7L30nO1xuXG4gICAgdmFyIG5hbWUgPSBwcm9jZXNzZXNbaV0ucG0yX2Vudi5uYW1lIHx8IHAuYmFzZW5hbWUocHJvY2Vzc2VzW2ldLnBtMl9lbnYucG1fZXhlY19wYXRoKTtcblxuICAgIC8vIExpbmUgb2YgbGlzdFxuICAgIHZhciBpdGVtID0gc3ByaW50ZignWyUyc10gJXMge3x9IE1lbToge2JvbGR9eyVzLWZnfSUzZHsvfSBNQiAgICBDUFU6IHtib2xkfXslcy1mZ30lMmR7L30gJXMgICVzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc2VzW2ldLnBtMl9lbnYucG1faWQsXG4gICAgICAgICAgICAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgIGdyYWRpZW50KG1lbVBlcmNlbnQsIFsyNTUsIDAsIDBdLCBbMCwgMjU1LCAwXSksXG4gICAgICAgICAgICAgICAgICAgICAgIChwcm9jZXNzZXNbaV0ubW9uaXQubWVtb3J5IC8gMTA0ODU3NikudG9GaXhlZCgyKSxcbiAgICAgICAgICAgICAgICAgICAgICAgZ3JhZGllbnQocHJvY2Vzc2VzW2ldLm1vbml0LmNwdSwgWzI1NSwgMCwgMF0sIFswLCAyNTUsIDBdKSxcbiAgICAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc2VzW2ldLm1vbml0LmNwdSxcbiAgICAgICAgICAgICAgICAgICAgICAgXCIlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgIHN0YXR1cyk7XG5cbiAgICAvLyBDaGVjayBpZiBpdGVtIGV4aXN0XG4gICAgaWYgKHRoaXMubGlzdC5nZXRJdGVtKGkpKSB7XG4gICAgICB0aGlzLmxpc3Quc2V0SXRlbShpLCBpdGVtKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICB0aGlzLmxpc3QucHVzaEl0ZW0oaXRlbSk7XG4gICAgfVxuXG4gICAgdmFyIHByb2MgPSBwcm9jZXNzZXNbdGhpcy5saXN0LnNlbGVjdGVkXTtcbiAgICAvLyByZW5kZXIgdGhlIGxvZ0JveFxuICAgIGxldCBwcm9jZXNzX2lkID0gcHJvYy5wbV9pZFxuICAgIGxldCBsb2dzID0gdGhpcy5sb2dMaW5lc1twcm9jZXNzX2lkXTtcbiAgICBpZih0eXBlb2YobG9ncykgIT09IFwidW5kZWZpbmVkXCIpe1xuICAgICAgdGhpcy5sb2dCb3guc2V0SXRlbXMobG9ncylcbiAgICAgIGlmICghdGhpcy5sb2dCb3guZm9jdXNlZCkge1xuICAgICAgICAgIHRoaXMubG9nQm94LnNldFNjcm9sbFBlcmMoMTAwKTtcbiAgICAgIH1cbiAgICB9ZWxzZXtcbiAgICAgIHRoaXMubG9nQm94LmNsZWFySXRlbXMoKTtcbiAgICB9XG4gICAgdGhpcy5sb2dCb3guc2V0TGFiZWwoYCAgJHtwcm9jLnBtMl9lbnYubmFtZX0gTG9ncyAgYClcblxuICAgIHRoaXMubWV0YWRhdGFCb3guc2V0TGluZSgwLCAnQXBwIE5hbWUgICAgICAgICAgICAgICcgKyAne2JvbGR9JyArIHByb2MucG0yX2Vudi5uYW1lICsgJ3svfScpO1xuICAgIHRoaXMubWV0YWRhdGFCb3guc2V0TGluZSgxLCAnTmFtZXNwYWNlICAgICAgICAgICAgICcgKyAne2JvbGR9JyArIHByb2MucG0yX2Vudi5uYW1lc3BhY2UgKyAney99Jyk7XG4gICAgdGhpcy5tZXRhZGF0YUJveC5zZXRMaW5lKDIsICdWZXJzaW9uICAgICAgICAgICAgICAgJyArICd7Ym9sZH0nICsgcHJvYy5wbTJfZW52LnZlcnNpb24gKyAney99Jyk7XG4gICAgdGhpcy5tZXRhZGF0YUJveC5zZXRMaW5lKDMsICdSZXN0YXJ0cyAgICAgICAgICAgICAgJyArIHByb2MucG0yX2Vudi5yZXN0YXJ0X3RpbWUpO1xuICAgIHRoaXMubWV0YWRhdGFCb3guc2V0TGluZSg0LCAnVXB0aW1lICAgICAgICAgICAgICAgICcgKyAoKHByb2MucG0yX2Vudi5wbV91cHRpbWUgJiYgcHJvYy5wbTJfZW52LnN0YXR1cyA9PSAnb25saW5lJykgPyB0aW1lU2luY2UocHJvYy5wbTJfZW52LnBtX3VwdGltZSkgOiAwKSk7XG4gICAgdGhpcy5tZXRhZGF0YUJveC5zZXRMaW5lKDUsICdTY3JpcHQgcGF0aCAgICAgICAgICAgJyArIHByb2MucG0yX2Vudi5wbV9leGVjX3BhdGgpO1xuICAgIHRoaXMubWV0YWRhdGFCb3guc2V0TGluZSg2LCAnU2NyaXB0IGFyZ3MgICAgICAgICAgICcgKyAocHJvYy5wbTJfZW52LmFyZ3MgPyAodHlwZW9mIHByb2MucG0yX2Vudi5hcmdzID09ICdzdHJpbmcnID8gSlNPTi5wYXJzZShwcm9jLnBtMl9lbnYuYXJncy5yZXBsYWNlKC8nL2csICdcIicpKTpwcm9jLnBtMl9lbnYuYXJncykuam9pbignICcpIDogJ04vQScpKTtcbiAgICB0aGlzLm1ldGFkYXRhQm94LnNldExpbmUoNywgJ0ludGVycHJldGVyICAgICAgICAgICAnICsgcHJvYy5wbTJfZW52LmV4ZWNfaW50ZXJwcmV0ZXIpO1xuICAgIHRoaXMubWV0YWRhdGFCb3guc2V0TGluZSg4LCAnSW50ZXJwcmV0ZXIgYXJncyAgICAgICcgKyAocHJvYy5wbTJfZW52Lm5vZGVfYXJncy5sZW5ndGggIT0gMCA/IHByb2MucG0yX2Vudi5ub2RlX2FyZ3MgOiAnTi9BJykpO1xuICAgIHRoaXMubWV0YWRhdGFCb3guc2V0TGluZSg5LCAnRXhlYyBtb2RlICAgICAgICAgICAgICcgKyAocHJvYy5wbTJfZW52LmV4ZWNfbW9kZSA9PSAnZm9ya19tb2RlJyA/ICd7Ym9sZH1mb3Jrey99JyA6ICd7Ymx1ZS1mZ317Ym9sZH1jbHVzdGVyey99JykpO1xuICAgIHRoaXMubWV0YWRhdGFCb3guc2V0TGluZSgxMCwgJ05vZGUuanMgdmVyc2lvbiAgICAgICAnICsgcHJvYy5wbTJfZW52Lm5vZGVfdmVyc2lvbik7XG4gICAgdGhpcy5tZXRhZGF0YUJveC5zZXRMaW5lKDExLCAnd2F0Y2ggJiByZWxvYWQgICAgICAgICcgKyAocHJvYy5wbTJfZW52LndhdGNoID8gJ3tncmVlbi1mZ317Ym9sZH3inJR7L30nIDogJ3tyZWQtZmd9e2JvbGR94pyYey99JykpO1xuICAgIHRoaXMubWV0YWRhdGFCb3guc2V0TGluZSgxMiwgJ1Vuc3RhYmxlIHJlc3RhcnRzICAgICAnICsgcHJvYy5wbTJfZW52LnVuc3RhYmxlX3Jlc3RhcnRzKTtcblxuICAgIHRoaXMubWV0YWRhdGFCb3guc2V0TGluZSgxMywgJ0NvbW1lbnQgICAgICAgICAgICAgICAnICsgKChwcm9jLnBtMl9lbnYudmVyc2lvbmluZykgPyBwcm9jLnBtMl9lbnYudmVyc2lvbmluZy5jb21tZW50IDogJ04vQScpKTtcbiAgICB0aGlzLm1ldGFkYXRhQm94LnNldExpbmUoMTQsICdSZXZpc2lvbiAgICAgICAgICAgICAgJyArICgocHJvYy5wbTJfZW52LnZlcnNpb25pbmcpID8gcHJvYy5wbTJfZW52LnZlcnNpb25pbmcucmV2aXNpb24gOiAnTi9BJykpO1xuICAgIHRoaXMubWV0YWRhdGFCb3guc2V0TGluZSgxNSwgJ0JyYW5jaCAgICAgICAgICAgICAgICAnICsgKChwcm9jLnBtMl9lbnYudmVyc2lvbmluZykgPyBwcm9jLnBtMl9lbnYudmVyc2lvbmluZy5icmFuY2ggOiAnTi9BJykpO1xuICAgIHRoaXMubWV0YWRhdGFCb3guc2V0TGluZSgxNiwgJ1JlbW90ZSB1cmwgICAgICAgICAgICAnICsgKChwcm9jLnBtMl9lbnYudmVyc2lvbmluZykgPyBwcm9jLnBtMl9lbnYudmVyc2lvbmluZy51cmwgOiAnTi9BJykpO1xuICAgIHRoaXMubWV0YWRhdGFCb3guZGVsZXRlTGluZSgxNylcbiAgICB0aGlzLm1ldGFkYXRhQm94LnNldExpbmUoMTcsICdMYXN0IHVwZGF0ZSAgICAgICAgICAgJyArICgocHJvYy5wbTJfZW52LnZlcnNpb25pbmcpID8gcHJvYy5wbTJfZW52LnZlcnNpb25pbmcudXBkYXRlX3RpbWUgOiAnTi9BJykpO1xuXG4gICAgaWYgKE9iamVjdC5rZXlzKHByb2MucG0yX2Vudi5heG1fbW9uaXRvcikubGVuZ3RoICE9IHRoaXMubWV0cmljc0JveC5pdGVtcy5sZW5ndGgpIHtcbiAgICAgIHRoaXMubWV0cmljc0JveC5jbGVhckl0ZW1zKCk7XG4gICAgfVxuICAgIHZhciBqID0gMDtcbiAgICBmb3IgKHZhciBrZXkgaW4gcHJvYy5wbTJfZW52LmF4bV9tb25pdG9yKSB7XG4gICAgICB2YXIgbWV0cmljX25hbWUgPSBwcm9jLnBtMl9lbnYuYXhtX21vbml0b3Jba2V5XS5oYXNPd25Qcm9wZXJ0eSgndmFsdWUnKSA/IHByb2MucG0yX2Vudi5heG1fbW9uaXRvcltrZXldLnZhbHVlIDogcHJvYy5wbTJfZW52LmF4bV9tb25pdG9yW2tleV1cbiAgICAgIHZhciBtZXRyaWNfdW5pdCA9IHByb2MucG0yX2Vudi5heG1fbW9uaXRvcltrZXldLmhhc093blByb3BlcnR5KCd1bml0JykgPyBwcm9jLnBtMl9lbnYuYXhtX21vbml0b3Jba2V5XS51bml0IDogbnVsbFxuICAgICAgdmFyIHByb2JlID0gYHtib2xkfSR7a2V5fXsvfSB7fH0gJHttZXRyaWNfbmFtZX0ke21ldHJpY191bml0ID09IG51bGwgPyAnJyA6ICcgJyArIG1ldHJpY191bml0fWBcblxuICAgICAgaWYgKHRoaXMubWV0cmljc0JveC5nZXRJdGVtKGopKSB7XG4gICAgICAgIHRoaXMubWV0cmljc0JveC5zZXRJdGVtKGosIHByb2JlKTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICB0aGlzLm1ldHJpY3NCb3gucHVzaEl0ZW0ocHJvYmUpO1xuICAgICAgfVxuICAgICAgaisrO1xuICAgIH1cblxuICAgIHRoaXMuc2NyZWVuLnJlbmRlcigpO1xuICB9XG5cbiAgcmV0dXJuIHRoaXM7XG59XG5cbi8qKlxuICogUHV0IExvZ1xuICogQG1ldGhvZCBsb2dcbiAqIEBwYXJhbSB7fSBkYXRhXG4gKiBAcmV0dXJuIHRoaXNcbiAqL1xuRGFzaGJvYXJkLmxvZyA9IGZ1bmN0aW9uKHR5cGUsIGRhdGEpIHtcbiAgdmFyIHRoYXQgPSB0aGlzO1xuXG4gIGlmKHR5cGVvZih0aGlzLmxvZ0xpbmVzW2RhdGEucHJvY2Vzcy5wbV9pZF0pID09IFwidW5kZWZpbmVkXCIpe1xuICAgIHRoaXMubG9nTGluZXNbZGF0YS5wcm9jZXNzLnBtX2lkXT1bXTtcbiAgfVxuICAvLyBMb2dzIGNvbG9yc1xuICBzd2l0Y2ggKHR5cGUpIHtcbiAgICBjYXNlICdQTTInOlxuICAgICAgdmFyIGNvbG9yID0gJ3tibHVlLWZnfSc7XG4gICAgICBicmVhaztcbiAgICBjYXNlICdvdXQnOlxuICAgICAgdmFyIGNvbG9yID0gJ3tncmVlbi1mZ30nO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAnZXJyJzpcbiAgICAgIHZhciBjb2xvciA9ICd7cmVkLWZnfSc7XG4gICAgICBicmVhaztcbiAgICBkZWZhdWx0OlxuICAgICAgdmFyIGNvbG9yID0gJ3t3aGl0ZS1mZ30nO1xuICB9XG5cbiAgdmFyIGxvZ3MgPSBkYXRhLmRhdGEuc3BsaXQoJ1xcbicpXG5cbiAgbG9ncy5mb3JFYWNoKChsb2cpID0+IHtcbiAgICBpZiAobG9nLmxlbmd0aCA+IDApIHtcbiAgICAgIHRoaXMubG9nTGluZXNbZGF0YS5wcm9jZXNzLnBtX2lkXS5wdXNoKGNvbG9yICsgZGF0YS5wcm9jZXNzLm5hbWUgKyAney99ID4gJyArIGxvZylcblxuXG4gICAgICAvL3JlbW92aW5nIGxvZ3MgaWYgbG9uZ2VyIHRoYW4gbGltaXRcbiAgICAgIGxldCBjb3VudCA9IDA7XG4gICAgICBsZXQgbWF4X2NvdW50ID0gMDtcbiAgICAgIGxldCBsZWFkaW5nX3Byb2Nlc3NfaWQgPSAtMTtcblxuICAgICAgZm9yKHZhciBwcm9jZXNzX2lkIGluIHRoaXMubG9nTGluZXMpe1xuICAgICAgICBjb3VudCArPSB0aGlzLmxvZ0xpbmVzW3Byb2Nlc3NfaWRdLmxlbmd0aDtcbiAgICAgICAgaWYoIHRoaXMubG9nTGluZXNbcHJvY2Vzc19pZF0ubGVuZ3RoID4gbWF4X2NvdW50KXtcbiAgICAgICAgICBsZWFkaW5nX3Byb2Nlc3NfaWQgPSArcHJvY2Vzc19pZDtcbiAgICAgICAgICBtYXhfY291bnQgPSB0aGlzLmxvZ0xpbmVzW3Byb2Nlc3NfaWRdLmxlbmd0aDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoY291bnQgPiAyMDApIHtcbiAgICAgICAgdGhpcy5sb2dMaW5lc1tsZWFkaW5nX3Byb2Nlc3NfaWRdLnNoaWZ0KClcbiAgICAgIH1cbiAgICB9XG4gIH0pXG5cbiAgcmV0dXJuIHRoaXM7XG59XG5cbmZ1bmN0aW9uIHRpbWVTaW5jZShkYXRlKSB7XG5cbiAgdmFyIHNlY29uZHMgPSBNYXRoLmZsb29yKG1vbWVudCgpLnVuaXgoKSAtIG1vbWVudChkYXRlKS51bml4KCkpO1xuXG4gIHZhciBpbnRlcnZhbCA9IE1hdGguZmxvb3Ioc2Vjb25kcyAvIDMxNTM2MDAwKTtcblxuICBpZiAoaW50ZXJ2YWwgPiAxKSB7XG4gICAgcmV0dXJuIGludGVydmFsICsgJ1knO1xuICB9XG4gIGludGVydmFsID0gTWF0aC5mbG9vcihzZWNvbmRzIC8gMjU5MjAwMCk7XG4gIGlmIChpbnRlcnZhbCA+IDEpIHtcbiAgICByZXR1cm4gaW50ZXJ2YWwgKyAnTSc7XG4gIH1cbiAgaW50ZXJ2YWwgPSBNYXRoLmZsb29yKHNlY29uZHMgLyA4NjQwMCk7XG4gIGlmIChpbnRlcnZhbCA+IDEpIHtcbiAgICByZXR1cm4gaW50ZXJ2YWwgKyAnRCc7XG4gIH1cbiAgaW50ZXJ2YWwgPSBNYXRoLmZsb29yKHNlY29uZHMgLyAzNjAwKTtcbiAgaWYgKGludGVydmFsID4gMSkge1xuICAgIHJldHVybiBpbnRlcnZhbCArICdoJztcbiAgfVxuICBpbnRlcnZhbCA9IE1hdGguZmxvb3Ioc2Vjb25kcyAvIDYwKTtcbiAgaWYgKGludGVydmFsID4gMSkge1xuICAgIHJldHVybiBpbnRlcnZhbCArICdtJztcbiAgfVxuICByZXR1cm4gTWF0aC5mbG9vcihzZWNvbmRzKSArICdzJztcbn1cblxuLyogQXJncyA6XG4gKiAgcCA6IFBlcmNlbnQgMCAtIDEwMFxuICogIHJnYl8gOiBBcnJheSBvZiByZ2IgWzI1NSwgMjU1LCAyNTVdXG4gKiBSZXR1cm4gOlxuICogIEhleGEgI0ZGRkZGRlxuICovXG5mdW5jdGlvbiBncmFkaWVudChwLCByZ2JfYmVnaW5uaW5nLCByZ2JfZW5kKSB7XG5cbiAgICB2YXIgdyA9IChwIC8gMTAwKSAqIDIgLSAxO1xuXG4gICAgdmFyIHcxID0gKHcgKyAxKSAvIDIuMDtcbiAgICB2YXIgdzIgPSAxIC0gdzE7XG5cbiAgICB2YXIgcmdiID0gW3BhcnNlSW50KChyZ2JfYmVnaW5uaW5nWzBdICogdzEgKyByZ2JfZW5kWzBdICogdzIpICsgXCJcIiksXG4gICAgICAgIHBhcnNlSW50KChyZ2JfYmVnaW5uaW5nWzFdICogdzEgKyByZ2JfZW5kWzFdICogdzIpICsgXCJcIiksXG4gICAgICAgICAgICBwYXJzZUludCgocmdiX2JlZ2lubmluZ1syXSAqIHcxICsgcmdiX2VuZFsyXSAqIHcyKSArIFwiXCIpXTtcblxuICAgIHJldHVybiBcIiNcIiArICgoMSA8PCAyNCkgKyAocmdiWzBdIDw8IDE2KSArIChyZ2JbMV0gPDwgOCkgKyByZ2JbMl0pLnRvU3RyaW5nKDE2KS5zbGljZSgxKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgRGFzaGJvYXJkO1xuIl19